# ç§’æ€å­æ•°ç»„ç±»é¢˜ç›®

|                     å‰ç¼€å’Œè§£å†³å­æ•°ç»„é—®é¢˜                     |                    æ»‘åŠ¨çª—å£è§£å†³å­æ•°ç»„é—®é¢˜                    |                    åŠ¨æ€è§„åˆ’è§£å†³å­æ•°ç»„é—®é¢˜                    |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| [560. å’Œä¸º K çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sum-equals-k/) | [713. ä¹˜ç§¯å°äº K çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-product-less-than-k/) | [53. æœ€å¤§å­æ•°ç»„å’Œ](https://leetcode-cn.com/problems/maximum-subarray/) |
| [974. å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sums-divisible-by-k/) | [2261. å«æœ€å¤š K ä¸ªå¯æ•´é™¤å…ƒç´ çš„å­æ•°ç»„](https://leetcode-cn.com/problems/k-divisible-elements-subarrays/) | [152. ä¹˜ç§¯æœ€å¤§å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-product-subarray/) |
| [523. è¿ç»­çš„å­æ•°ç»„å’Œ](https://leetcode-cn.com/problems/continuous-subarray-sum/) | [209. é•¿åº¦æœ€å°çš„å­æ•°ç»„](https://leetcode-cn.com/problems/minimum-size-subarray-sum/) | [718. æœ€é•¿é‡å¤å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/) |



å¤§å®¶åº”è¯¥å¤šå¤šå°‘å°‘éƒ½è§è¿‡å‡ ä¸ªã€Œå­æ•°ç»„ã€ç›¸å…³çš„é¢˜ç›®ï¼Œä»Šå¤©ç‰¹æ„æŠŠå¸¸è€ƒçš„ç›¸å…³é¢˜ç›®æœé›†äº†ä¸€æ³¢ï¼Œè¿›è¡Œåˆ†ç±»æ•´ç†æ€»ç»“ï¼Œæ‰€ä»¥æ–‡ç« å¾ˆç¡¬æ ¸ï¼Œè®°å¾—æ”¶è—â•å…³æ³¨ï¼

å…ˆç»™å¤§å®¶æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼šã€Œå­æ•°ç»„ã€ã€Œå­åºåˆ—ã€ï¼Œç›¸ä¿¡è‚¯å®šæœ‰å¾ˆå¤šäººå‚»å‚»åˆ†ä¸æ¸…æ¥š

ã€Œå­æ•°ç»„ã€ï¼šå¿…é¡»è¿ç»­ï¼Œå³å­æ•°ç»„ä¸­çš„å…ƒç´ å¿…é¡»åœ¨åŸæ•°ç»„ä¸­è¿ç»­ã€‚å¯ä»¥çœ‹é“å…¥é—¨é¢˜ [æœ€å¤§å­æ•°ç»„å’Œ](https://leetcode-cn.com/problems/maximum-subarray/) åŠ æ·±ç†è§£

ã€Œå­åºåˆ—ã€ï¼šå¯ä¸è¿ç»­ï¼Œå³å­åºåˆ—ä¸­çš„å…ƒç´ åœ¨åŸæ•°ç»„ä¸­å¯éè¿ç»­ã€‚å¯ä»¥çœ‹é“å…¥é—¨é¢˜ [æœ€é•¿é€’å¢å­åºåˆ—](https://leetcode-cn.com/problems/longest-increasing-subsequence/) åŠ æ·±ç†è§£ï¼Œ**å…³äºæœ¬é¢˜çš„è¯¦ç»†è®²è§£å¯è§ [åŠ¨æ€è§„åˆ’è®¾è®¡ï¼šæœ€é•¿é€’å¢å­åºåˆ—](./åŠ¨æ€è§„åˆ’è®¾è®¡ï¼šæœ€é•¿é€’å¢å­åºåˆ—.html)**

ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¯¹äºæ•°ç»„`nums = [1,2,3,4]`ï¼Œå…¶ä¸­`[1,2]ã€[2,3]`å‡ä¸ºå­æ•°ç»„ï¼Œè€Œ`[2,4]ã€[1,3,4]`å‡ä¸ºå­åºåˆ—



å¥½äº†ï¼Œæ­£å¼è¿›å…¥æœ¬æ–‡çš„ä¸»è¦å†…å®¹ã€‚å¦‚æ­£ä¸Šæ–¹åˆ—ä¸¾çš„ 9 é“é¢˜ç›®ï¼Œå¯ä»¥ç®€å•çš„åˆ†ä¸ºä¸‰ç±»ï¼Œä½¿ç”¨çš„æ–¹æ³•å¯åˆ†ä¸ºä¸‰ç§ï¼Œå³ï¼šã€Œå‰ç¼€å’Œã€ã€Œæ»‘åŠ¨çª—å£ã€ã€ŒåŠ¨æ€è§„åˆ’ã€ã€‚ä¸‹é¢å…·ä½“é¢˜ç›®å…·ä½“åˆ†æ

### <font color=#1FA774>å‰ç¼€å’Œè§£å†³å­æ•°ç»„é—®é¢˜</font>

**å…³äºã€Œå‰ç¼€å’Œã€çš„è¯¦ç»†ä»‹ç»å¯è§ [å‰ç¼€å’Œæ•°ç»„](./å‰ç¼€å’Œæ•°ç»„.html)**

è¿™ä¸€ç±»ã€Œå­æ•°ç»„é—®é¢˜ã€å­˜åœ¨ä¸¤ä¸ªå…±åŒçš„**<font color='red'>ç‰¹ç‚¹</font>**ï¼š

- **<font color='red'>å¤„ç†å­æ•°ç»„ä¸­å…ƒç´ ä¹‹å’Œ (ç ”ç©¶å¯¹è±¡)</font>**
- **<font color='red'>ç»™å‡ºäº†å…·ä½“çš„é™å®š (çº¦æŸæ¡ä»¶)</font>ï¼Œå¦‚ï¼šå’Œä¸º`k`çš„å€æ•°çš„å­æ•°ç»„**

#### <font color=#9933FF>å’Œä¸º K çš„å­æ•°ç»„</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [å’Œä¸º K çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sum-equals-k/)**

è¿™ä¸ªé¢˜ç›®ç®—æ˜¯ä¸€ä¸ªå…¥é—¨æ¬¾çš„å‰ç¼€å’Œé—®é¢˜ï¼Œå€Ÿé‰´`ä¸¤æ•°å’Œ`çš„æ€è·¯ï¼Œåˆ©ç”¨`HashMap`

```java
public int subarraySum(int[] nums, int k) {
    Map<Integer, Integer> preSum = new HashMap<>();
    // æ³¨æ„ï¼šéœ€è¦å•ç‹¬åŠ  (0, 1)
    preSum.put(0, 1);

    int sum = 0;
    int res = 0;
    for (int i = 0; i < nums.length; i++) {
        sum += nums[i];
        int target = sum - k;
        if (preSum.containsKey(target)) res += preSum.get(target);
        preSum.put(sum, preSum.getOrDefault(sum, 0) + 1);
    }
    return res;
}
```

è¿™é‡Œå€¼å¾—æ³¨æ„çš„ä¸€ç‚¹ï¼šåœ¨å¾ªç¯å¼€å§‹ä¹‹å‰ï¼Œå¾€`preSum`ä¸­åŠ äº†ä¸€è¡Œæ•°æ®`preSum.put(0, 1)`ã€‚ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·æ“ä½œå‘¢ï¼Ÿï¼Ÿ

ç°åœ¨è®¾æƒ³ä¸€ç§æƒ…å†µï¼Œ`nums = [1,2,3], k = 6`ï¼Œæ˜¾ç„¶è¿™ä¸ªæ ·ä¾‹æ˜¯å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ï¼Œå³ï¼š`[1,2,3]`

å½“`i = 2, sum = 6`æ—¶ï¼Œæ­¤æ—¶`target = sum - k = 0`ï¼Œå¦‚æœä¸åŠ `preSum.put(0, 1)`ï¼Œç»“æœå°±ä¼šå‡ºé”™ï¼ï¼ï¼

#### <font color=#9933FF>å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sums-divisible-by-k/)**

å¦‚æœæˆ‘ä»¬éœ€è¦æ±‚åŒºé—´ä¸º`[i, j]`å­æ•°ç»„çš„å’Œï¼Œå³ä¸º`preSum[j] - preSum[i - 1]`ï¼Œè€Œé¢˜ç›®çš„è¦æ±‚æ˜¯å…ƒç´ ä¹‹å’Œå¯è¢«`k`æ•´é™¤çš„å­æ•°ç»„çš„ä¸ªæ•°ï¼Œæ‰€ä»¥åªéœ€è¦æ‰¾å‡ºæ‰€æœ‰`(preSum[j] - preSum[i - 1]) % k == 0`çš„åŒºé—´å³å¯ã€‚å¾ˆå®¹æ˜“æƒ³åˆ°å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ï¼š

```java
// å…³é”®ä»£ç 
for (int j = 1; i < preSum.length; j++) {
    for (int i = 0; i < j; i++) {
        if ((preSum(j) - preSum[i - 1]) % k == 0) res++;
    }
}
```

ç®€å•ç²—æš´ï¼Œå¯æƒœè¶…æ—¶ï¼ï¼ğŸ˜­ğŸ˜­ğŸ˜­

è¿™ä¸ªé¢˜ç›®çš„ä¼˜åŒ–æ¶‰åŠåˆ°æ•°å­¦ä¸Šçš„ä¸€ä¸ªæ¦‚å¿µï¼Œä¸‹é¢å…ˆä»‹ç»ä¸€ä¸‹è¿™ä¸ªç†è®º

```
(preSum[j] - preSum[i - 1]) % k == 0
preSum[j] % k - preSum[i - 1] % k == 0
preSum[j] % k == preSum[i - 1] % k
```

æ‰€ä»¥å¯¹äº`preSum[j]`ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾æ˜¯å¦å­˜åœ¨`preSum[i - 1]`ï¼Œä½¿å¾—`preSum[j] % k == preSum[i - 1] % k`

ç›¸åº”çš„ä»£ç å¦‚ä¸‹ï¼š

```java
public int subarraysDivByK(int[] nums, int k) {
    int ans = 0;
    int sum = 0;
    Map<Integer, Integer> map = new HashMap<>();
    map.put(0, 1);
    for (int i = 0; i < nums.length; i++) {
        sum += nums[i];
        // è¿™æ ·å¤„ç†æ˜¯ä¸ºäº†æŠŠè´Ÿæ•°è½¬æ¢æˆç›¸å¯¹åº”çš„æ­£æ•°
        int key = (sum % k + k) % k;
        if (map.containsKey(key)) ans += map.get(key);
        map.put(key, map.getOrDefault(key, 0) + 1);
    }
    return ans;
}
```

#### <font color=#9933FF>è¿ç»­çš„å­æ•°ç»„å’Œ</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [è¿ç»­çš„å­æ•°ç»„å’Œ](https://leetcode-cn.com/problems/continuous-subarray-sum/)**

è¿™ä¸ªé¢˜ç›®å’Œä¸Šä¸€ä¸ªé¢˜ç›®å‡ ä¹ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ã€Œå­æ•°ç»„å¤§å°**è‡³å°‘ä¸º 2**ã€ï¼Œæ‰€ä»¥è¿™ä¸ªé¢˜ç›®ä¸»è¦å°±ä»‹ç»å¦‚ä½•æ‰å¯ä»¥å¾—åˆ°å¤§å°è‡³å°‘ä¸º 2 çš„å­æ•°ç»„

![18](https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220506/1007021651802822AOVgpa18.svg)

å½“æˆ‘ä»¬å¤„ç†`preSum[3]`çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨å‰ä¸¤ä¸ªä¸­æœç´¢æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„æ•°æ®å³å¯ï¼Œå³ï¼šå¤„ç†`i`æ—¶ï¼Œåªéœ€è¦åœ¨`[0...i-2]`ä¸­æ£€ç´¢

```java
public boolean checkSubarraySum(int[] nums, int k) {
    int[] preSum = new int[nums.length + 1];
    for (int i = 1; i < preSum.length; i++) preSum[i] = preSum[i - 1] + nums[i - 1];
    Set<Integer> set = new HashSet<>();
    for (int i = 2; i < preSum.length; i++) {
        int key = preSum[i - 2] % k;
        set.add(key);
        if (set.contains(preSum[i] % k)) return true;
    }
    return false;
}
```

ä¸ºä»€ä¹ˆè¿™ä¸ªé¢˜ç›®æ²¡æœ‰åŠ ä¸€è¡Œ`set.add(0)`ä»£ç å‘¢ï¼Ÿ

è§‚å¯Ÿä»£ç å¯çŸ¥ï¼Œæˆ‘ä»¬æ˜¯å…ˆ`add`å`æ£€ç´¢`ã€‚å½“`i = 2`æ—¶ï¼Œ`preSum[i - 2] = preSum[0] = 0`ï¼Œæ‰€ä»¥æˆ‘ä»¬å·²ç»æå‰æŠŠ `0` åŠ å…¥`set`é›†åˆä¸­äº†

### <font color=#1FA774>æ»‘åŠ¨çª—å£è§£å†³å­æ•°ç»„é—®é¢˜</font>

**å…³äºã€Œæ»‘åŠ¨çª—å£æŠ€å·§ã€çš„è¯¦ç»†ä»‹ç»å¯è§ [æ»‘åŠ¨çª—å£æŠ€å·§](./æ»‘åŠ¨çª—å£.html)**

è¿™ä¸€ç±»ã€Œå­æ•°ç»„é—®é¢˜ã€å­˜åœ¨ä¸¤ä¸ªå…±åŒçš„**<font color='red'>ç‰¹ç‚¹</font>**ï¼š

- **<font color='red'>å¤„ç†å­æ•°ç»„ä¸­å•ä¸ªå…ƒç´  (ç ”ç©¶å¯¹è±¡)</font>**

- **<font color='red'>ç»™å‡ºçš„é™å®šæ¡ä»¶ä¸ºä¸€ä¸ªèŒƒå›´ (çº¦æŸæ¡ä»¶)</font>ï¼Œå¦‚ï¼šå’Œ`>=target`çš„å­æ•°ç»„ æˆ–è€… ä¹˜ç§¯ä¸¥æ ¼å°äº`k`**

#### <font color=#9933FF>ä¹˜ç§¯å°äº K çš„å­æ•°ç»„</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [ä¹˜ç§¯å°äº K çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-product-less-than-k/)**

æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œä¿è¯æ»‘åŠ¨çª—å£å†…çš„å…ƒç´ ä¹˜ç§¯ä¸¥æ ¼å°äº`k`ã€‚å¯¹äºæ¯ä¸€æ¬¡æ»‘åŠ¨çª—å£å³è¾¹ç•Œçš„æ›´æ–°ï¼Œéƒ½éœ€è¦æ›´æ–°ä¸€æ¬¡ç»“æœ

å¯¹äºåŒºé—´`[i, j]`ï¼Œè®¡ç®—ä»¥`j`ç»“å°¾çš„æ‰€æœ‰å­æ•°ç»„æ•°é‡ï¼Œä¸º`j - i + 1`

æ‰€ä»¥å…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š

```java
public int numSubarrayProductLessThanK(int[] nums, int k) {
    // ç‰¹æ®Šæƒ…å†µæå‰åˆ¤æ–­
    if (k <= 1) return 0;
    int l = 0, r = 0;
    // è®°å½•å­æ•°ç»„çš„ä¹˜ç§¯
    int product = 1;
    // è®°å½•ç»“æœ
    int res = 0;
    while (r < nums.length) {
        // æ‰©å¼ å³è¾¹ç•Œ
        product *= nums[r++];
        // å¦‚æœæ­¤æ—¶å­æ•°ç»„ä¹˜ç§¯ä¸æ»¡è¶³è¦æ±‚ï¼Œæ”¶ç¼©å·¦è¾¹ç•Œï¼Œå§‹ç»ˆä¿æŒå­æ•°ç»„ [l, r] æ»¡è¶³é¢˜ç›®çº¦æŸæ¡ä»¶
        while (product >= k) product /= nums[l++];
        // æ›´æ–°ç»“æœï¼Œæ·»åŠ ä»¥ l ç»“å°¾çš„å­æ•°ç»„çš„æ•°é‡
        // æ²¡æœ‰ +1 æ˜¯å› ä¸ºå‰é¢å·²ç» r++
        res += (r - l);
    }
    return res;
}
```

#### <font color=#9933FF>å«æœ€å¤š K ä¸ªå¯æ•´é™¤å…ƒç´ çš„å­æ•°ç»„</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [å«æœ€å¤š K ä¸ªå¯æ•´é™¤å…ƒç´ çš„å­æ•°ç»„](https://leetcode-cn.com/problems/k-divisible-elements-subarrays/)**

è¿™ä¸ªé¢˜ç›®å’Œä¸Šé¢çš„é¢˜ç›®åŸºæœ¬ä¸Šå·®ä¸å¤šï¼Œæˆ‘ä»¬ç”¨`count`è®°å½•å½“å‰å­æ•°ç»„ä¸­æ»¡è¶³è¦æ±‚çš„å…ƒç´ 

```java
public int countDistinct(int[] nums, int k, int p) {
    int l = 0, r = 0;
    int count = 0;
    Set<String> set = new HashSet<>();
    while (r < nums.length) {
        // æ‰©å¼ å³è¾¹ç•Œ
        if (nums[r++] % p == 0) count++;
        // å¦‚æœæ­¤æ—¶ count ä¸æ»¡è¶³è¦æ±‚ï¼Œæ”¶ç¼©å·¦è¾¹ç•Œï¼Œå§‹ç»ˆä¿æŒå­æ•°ç»„ [l, r] å†…å…ƒç´ æ•°é‡æ»¡è¶³é¢˜ç›®çº¦æŸæ¡ä»¶
        while (count > k) {
            if (nums[l++] % p == 0) count--;
        }
        // è®°å½•ç»“æœ
        StringBuffer sb = new StringBuffer();
        // è®°å½•ä»¥ r ç»“å°¾çš„å­æ•°ç»„æ•°æ®
        // r - 1 æ˜¯å› ä¸ºå‰é¢å·²ç» r++
        for (int i = r - 1; i >= l; i--) {
            // å¿…é¡»æ·»åŠ  " "ï¼Œæ‰èƒ½è¾¾åˆ°å»é‡çš„æ•ˆæœ
            // å¦‚ï¼š1 4 å’Œ 14 å¦‚æœä¸åŠ  " "ï¼Œå°±ä¼šæ˜¯ä¸€æ ·çš„
            sb.append(nums[i]).append(" ");
            set.add(sb.toString());
        }
    }
    return set.size();
}
```

#### <font color=#9933FF>é•¿åº¦æœ€å°çš„å­æ•°ç»„</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [é•¿åº¦æœ€å°çš„å­æ•°ç»„](https://leetcode-cn.com/problems/minimum-size-subarray-sum/)**

è¿™ä¸ªé¢˜ç›®æ»¡è¶³ã€Œå‰ç¼€å’Œè§£å†³å­æ•°ç»„é—®é¢˜ã€çš„ç¬¬ä¸€ä¸ªç‰¹ç‚¹ï¼Œæ‰€ä»¥å…¶å®å¯ä»¥ç”¨å‰ç¼€å’Œå»è§£å†³è¯¥é—®é¢˜

å¯¹æ¯ä¸€ä¸ªå­æ•°ç»„å…ƒç´ ä¹‹å’Œè¿›è¡Œåˆ¤æ–­ï¼Œå¾—åˆ°é•¿åº¦æœ€çŸ­æ»¡è¶³è¦æ±‚çš„å­æ•°ç»„å³å¯

```java
public int minSubArrayLen(int target, int[] nums) {
    int ans = Integer.MAX_VALUE;
    int[] preSum = new int[nums.length + 1];
    for (int i = 1; i < preSum.length; i++) {
        preSum[i] = preSum[i - 1] + nums[i - 1];
        // éå†ä»¥ i ç»“å°¾çš„æ‰€æœ‰å­æ•°ç»„
        for (int j = i - 1; j >= 0; j--) {
            if (preSum[i] - preSum[j] >= target) ans = Math.min(ans, i - j);
        }
    }
    return ans == Integer.MAX_VALUE ? 0 : ans;
}
```

æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆæ»¡æ„ï¼Œä½†æ˜¯çœ‹ä¸€çœ¼æ‰§è¡Œæ—¶é—´ï¼ï¼(ç¬é—´åˆä¸æ»¡æ„äº†)

![2](https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220823/2351221661269882nViDJ62.svg)



å…¶å®è¿™ä¸ªé—®é¢˜ä¹Ÿæ»¡è¶³ã€Œæ»‘åŠ¨çª—å£è§£å†³å­æ•°ç»„é—®é¢˜ã€çš„ç¬¬ä¸€ä¸ªç‰¹ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°è¯•ç”¨æ»‘åŠ¨çª—å£å»è¯•è¯•ï¼

æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œä¿è¯æ»‘åŠ¨çª—å£å†…çš„å…ƒç´ ä¹‹å’Œ`>= target`æ—¶æ›´æ–°ç»“æœï¼Œè¿™ä¸ªé—®é¢˜ç”¨æ»‘åŠ¨çª—å£å»è§£å†³çš„ä»£ç æ¡†æ¶å’Œ **[æ»‘åŠ¨çª—å£æŠ€å·§](./æ»‘åŠ¨çª—å£.html)** ä¸­æåˆ°çš„ç»“æ„ä¿æŒé«˜åº¦çš„ä¸€è‡´ï¼

```java
public int minSubArrayLen(int target, int[] nums) {
    int l = 0, r = 0;
    int sum = 0;
    int res = Integer.MAX_VALUE;
    while (r < nums.length) {
        sum += nums[r++];
        // å­æ•°ç»„ä¸­å…ƒç´ ä¹‹å’Œ >= target å¼€å§‹æ›´æ–°ç»“æœï¼ŒåŒæ—¶æ”¶ç¼©çª—å£
        while (sum >= target) {
            // æ­¤å¾ªç¯å†…çš„æ‰€æœ‰å­æ•°ç»„ä¹‹å’Œå‡æ»¡è¶³è¦æ±‚ï¼Œæ‰€ä»¥æ¯æ¬¡æ”¶ç¼©éƒ½æ›´æ–°ä¸€æ¬¡ç»“æœ
            res = Math.min(res, r - l);
            sum -= nums[l++];
        }
    }
    return res == Integer.MAX_VALUE ? 0 : res;
}
```

åŒæ ·çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ‰§è¡Œçš„æ—¶é—´ (æœ‰äº†è´¨çš„è¿›æ­¥)

![3](https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220823/23513616612698965vxboj3.svg)

### <font color=#1FA774>åŠ¨æ€è§„åˆ’è§£å†³å­æ•°ç»„é—®é¢˜</font>

**å…³äºã€ŒåŠ¨æ€è§„åˆ’è§£é¢˜å¥—è·¯æ¡†æ¶ã€çš„è¯¦ç»†ä»‹ç»å¯è§ [åŠ¨æ€è§„åˆ’è§£é¢˜å¥—è·¯æ¡†æ¶](./åŠ¨æ€è§„åˆ’è§£é¢˜å¥—è·¯æ¡†æ¶.html)**

è¿™ä¸€ç±»ã€Œå­æ•°ç»„é—®é¢˜ã€å­˜åœ¨ä¸€ä¸ªå…±åŒçš„**<font color='red'>ç‰¹ç‚¹</font>**ï¼š

- **<font color='red'>æ±‚æœ€å€¼é—®é¢˜</font>ï¼Œå¦‚ï¼šæœ€å¤§å­æ•°ç»„å’Œã€ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ç­‰**

#### <font color=#9933FF>æœ€å¤§å­æ•°ç»„å’Œ</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [æœ€å¤§å­æ•°ç»„å’Œ](https://leetcode-cn.com/problems/maximum-subarray/)**

æ ¹æ®åŠ¨æ€è§„åˆ’çš„æ€ç»´æ¡†æ¶ï¼š**<font color='red'>æ˜ç¡® base case -> æ˜ç¡®ã€ŒçŠ¶æ€ã€-> æ˜ç¡®ã€Œé€‰æ‹©ã€ -> å®šä¹‰ dp æ•°ç»„/å‡½æ•°çš„å«ä¹‰</font>**ï¼Œæˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„åˆ†æ

é¦–å…ˆæŠ½è±¡å‡ºåŸé—®é¢˜ã€Œå¯¹äºæ•°ç»„`num[0..n]`ï¼Œæ‰¾å‡ºä¸€ä¸ªä»¥`num[n]`ç»“å°¾çš„æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ã€ï¼Œæ‰€ä»¥å¯¹åº”çš„å­é—®é¢˜æ˜¯ã€Œå¯¹äºæ•°ç»„`num[0..i]`ï¼Œæ‰¾å‡ºä¸€ä¸ªä»¥`num[i]`ç»“å°¾çš„æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ã€

è€Œã€ŒçŠ¶æ€ã€æ˜¯**åŸé—®é¢˜å’Œå­é—®é¢˜ä¸­ä¼šå‘ç”Ÿå˜åŒ–çš„å˜é‡**ï¼Œæ‰€ä»¥ã€ŒçŠ¶æ€ã€å³ä¸º`nums[0..i]`

å†æ¥ç¡®å®šã€Œé€‰æ‹©ã€ï¼Œã€Œé€‰æ‹©ã€æ˜¯**å¯¼è‡´ã€ŒçŠ¶æ€ã€äº§ç”Ÿå˜åŒ–çš„è¡Œä¸º**ï¼Œå³ï¼šé€‰æ‹©`nums[i]`æ¥ç€`nums[0..i-1]`ç»§ç»­æ±‚å’Œï¼Œæˆ–è€…ä»`nums[i]`å¼€å§‹é‡æ–°æ±‚å’Œ

æ ¹æ®ã€ŒçŠ¶æ€ã€å’Œã€Œé€‰æ‹©ã€ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡º`dp[]`çš„å®šä¹‰ï¼š<font color='red'>`dp[i]`è¡¨ç¤ºä»¥`nums[i]`ç»“å°¾çš„å­æ•°ç»„çš„æœ€å¤§å’Œ</font>

ç°åœ¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ˆå¿«ç¡®å®š base caseï¼Œå³ï¼š`dp[0] = 0`

å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š

```java
public int maxSubArray(int[] nums) {
    int[] dp = new int[nums.length + 1];
    // é˜²æ­¢åªæœ‰è´Ÿæ•°çš„æƒ…å†µ
    int res = nums[0];
    for (int i = 1; i < dp.length; i++) {
        // å¦‚æœ dp[i - 1] < 0ï¼Œæ— è®ºå¦‚ä½•åŠ ä¸Š nums[i - 1]ï¼Œç»“æœåªä¼šæ›´å°
        if (dp[i - 1] < 0) dp[i] = nums[i - 1];
        else dp[i] = dp[i - 1] + nums[i - 1];
        res = Math.max(res, dp[i]);
    }
    return res;
}
```

ç”±äº`dp[i]`åªå’Œ`dp[i-1]`æœ‰å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥å¯¹ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–ä¸€æ³¢ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public int maxSubArray(int[] nums) {
    int dp = 0;
    // é˜²æ­¢åªæœ‰è´Ÿæ•°çš„æƒ…å†µ
    int res = nums[0];
    for (int i = 0; i < nums.length; i++) {
        // å¦‚æœ dp[i - 1] < 0ï¼Œæ— è®ºå¦‚ä½•åŠ ä¸Š nums[i - 1]ï¼Œç»“æœåªä¼šæ›´å°
        if (dp < 0) dp = nums[i];
        else dp = dp + nums[i];
        res = Math.max(res, dp);
    }
    return res;
}
```

#### <font color=#9933FF>ä¹˜ç§¯æœ€å¤§å­æ•°ç»„</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [ä¹˜ç§¯æœ€å¤§å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-product-subarray/)**

å¯¹äºã€ŒåŠ¨æ€è§„åˆ’è§£å†³å­æ•°ç»„é—®é¢˜ã€ï¼Œã€ŒçŠ¶æ€ã€å’Œã€Œé€‰æ‹©ã€éƒ½å¤§å·®ä¸å·®ï¼Œå”¯ä¸€æœ‰åŒºåˆ«æ˜¯`dp`æ•°ç»„çš„å®šä¹‰

æ ¹æ®ç»éªŒï¼Œå¯¹äºå­æ•°ç»„çš„é—®é¢˜ä¸­ï¼Œ`dp[i]`å®šä¹‰æœ€å¤šçš„å°±æ˜¯ä»¥`i`ç»“å°¾çš„æ»¡è¶³é¢˜ç›®æ¡ä»¶çš„æœ€å€¼ã€‚ä¾‹å¦‚æœ¬é¢˜ï¼Œ`dp[]`çš„å®šä¹‰å¦‚ä¸‹ï¼š`dp[i]`è¡¨ç¤ºä»¥`nums[i]`ç»“å°¾çš„ä¹˜ç§¯æœ€å¤§çš„å­æ•°ç»„

æˆ‘ä»¬ç°åœ¨éœ€è¦è€ƒè™‘çš„å°±æ˜¯ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€

æƒ…å†µä¸€ï¼šå¦‚æœ`nums[i] > 0`

- å¦‚æœ `dp[i - 1] > 0`ï¼Œé‚£ä¹ˆ`dp[i] = dp[i - 1] * nums[i]`
- å¦‚æœ `dp[i - 1] < 0`ï¼Œé‚£ä¹ˆ`dp[i] = nums[i]`
- ç»¼ä¸Šï¼š`dp[i] = Math.max(dp[i - 1] * nums[i], nums[i])`

æƒ…å†µäºŒï¼šå¦‚æœ`nums[i] < 0`ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä»¥`nums[i - 1]`ç»“å°¾çš„ä¹˜ç§¯æœ€å°çš„å­æ•°ç»„ï¼Œè®°ä¸º`iMin[i - 1]` (åŸå› ï¼šä¸€ä¸ªè´Ÿæ•°âœ–ï¸æœ€å°å€¼ï¼Œæ‰èƒ½å˜å¾—æ›´å¤§)

- å¦‚æœ `iMin[i - 1] > 0`ï¼Œé‚£ä¹ˆ`iMin[i] = nums[i]`
- å¦‚æœ `iMin[i - 1] < 0`ï¼Œé‚£ä¹ˆ`iMin[i] = iMin[i - 1] * nums[i]`
- ç»¼ä¸Šï¼š`iMin[i] = Math.max(iMin[i - 1] * nums[i], nums[i])`

ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å‘ç°åªæœ‰ä¸€ä¸ªå­˜å‚¨ä»¥`nums[i]`ç»“å°¾çš„ä¹˜ç§¯æœ€å¤§çš„å­æ•°ç»„æ˜¯ä¸å¤Ÿçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´æ–°ä¸€ä¸‹`dp`æ•°ç»„çš„å®šä¹‰

`iMax[]`çš„å®šä¹‰å¦‚ä¸‹ï¼š`iMax[i]`è¡¨ç¤ºä»¥`nums[i]`ç»“å°¾çš„ä¹˜ç§¯æœ€å¤§çš„å­æ•°ç»„

`iMin[]`çš„å®šä¹‰å¦‚ä¸‹ï¼š`iMin[i]`è¡¨ç¤ºä»¥`nums[i]`ç»“å°¾çš„ä¹˜ç§¯æœ€å¤§çš„å­æ•°ç»„

åŒæ ·çš„ï¼Œç”±äº`iMax[i]`åªå’Œ`iMax[i-1]`æœ‰å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥å¯¹ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–ä¸€æ³¢ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public int maxProduct(int[] nums) {
    // é˜²æ­¢åªæœ‰è´Ÿæ•°çš„æƒ…å†µ
    int res = nums[0];
    int iMax = 1, iMin = 1;
    for (int i = 0; i < nums.length; i++) {
        if (nums[i] < 0) {
            int tmp = iMax;
            iMax = iMin;
            iMin = tmp;
        }
        iMax = Math.max(iMax * nums[i], nums[i]);
        iMin = Math.min(iMin * nums[i], nums[i]);
        res = Math.max(res, iMax);
    }
    return res;
}
```

#### <font color=#9933FF>æœ€é•¿é‡å¤å­æ•°ç»„</font>

**è¯¦æƒ…å¯è§é¢˜ç›® [æœ€é•¿é‡å¤å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/)**

åŒç†ï¼Œã€ŒçŠ¶æ€ã€å’Œã€Œé€‰æ‹©ã€éƒ½å¤§å·®ä¸å·®ï¼Œå”¯ä¸€æœ‰åŒºåˆ«æ˜¯`dp`æ•°ç»„çš„å®šä¹‰

æ ¹æ®ç»éªŒï¼Œå¯¹äºå­æ•°ç»„çš„é—®é¢˜ä¸­ï¼Œ`dp[i]`å®šä¹‰æœ€å¤šçš„å°±æ˜¯ä»¥`i`ç»“å°¾çš„æ»¡è¶³é¢˜ç›®æ¡ä»¶çš„æœ€å€¼ã€‚ä¾‹å¦‚æœ¬é¢˜ï¼Œ`dp[][]`çš„å®šä¹‰å¦‚ä¸‹ï¼š`dp[i][j]`è¡¨ç¤ºä»¥`nums1[i]`å’Œ`nums2[j]`ç»“å°¾çš„æœ€é•¿é‡å¤å­æ•°ç»„

å¦‚æœ`nums1[i] != nums2[j]`ï¼Œé‚£ä¹ˆä»¥å®ƒä¿©ç»“å°¾çš„é‡å¤å­æ•°ç»„é•¿åº¦ä¸º 0

å¦‚æœ`nums1[i] == nums2[j]`ï¼Œé‚£ä¹ˆå°±éœ€è¦çœ‹ä»¥`nums1[i - 1]`å’Œ`nums2[j - 1]`ç»“å°¾çš„æœ€é•¿é‡å¤å­æ•°ç»„çš„é•¿åº¦ï¼Œç„¶åâ•1 å³å¯

çŠ¶æ€è½¬ç§»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![15](https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220506/1619401651825180snoa1y15.svg)

æ‰€ä»¥å°±å¯ä»¥å¾ˆå®¹æ˜“çš„å†™å‡ºä»£ç ï¼š

```java
public int findLength(int[] nums1, int[] nums2) {
    int[][] dp = new int[nums1.length + 1][nums2.length + 1];
    int res = 0;
    for (int i = 1; i < dp.length; i++) {
        for (int j = 1; j < dp[0].length; j++) {
            if (nums1[i - 1] == nums2[j - 1]) dp[i][j] = dp[i - 1][j - 1] + 1;
            res = Math.max(res, dp[i][j]);
        }
    }
    return res;
}
```
