# 浅析：搜索旋转排序数组

[33. 搜索旋转排序数组](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)



遇到了一道很有意思的题目，核心也是用二分搜索！关于二分搜索的技巧可见 **[二分搜索](./二分搜索.html)**

本人一直在「收缩区间」处裹不清楚，直到看到了一句话就豁然开朗：**<font color='red'>旋转数组后，从中间划分，一定有一边是有序的</font>**

![123](https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220424/2049381650804578K2gOGf123.svg)

所以我们只需要判断哪边有序，然后判断是否在该有序区间内。如果不在，那么肯定在另一半区间内

```java
public int search(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left - (left - right) / 2;
        // 找到
        if (nums[mid] == target) return mid;
        // 左边有序
        if (nums[left] <= nums[mid]) {
            // target 在左边
            if (nums[left] <= target && target < nums[mid]) right = mid - 1;
            else left = mid + 1;
        } else {
            // target 在右边
            if (nums[mid] < target && target <= nums[right]) left = mid + 1;
            else right = mid - 1;
        }
    }
    return -1;
}
```

<img src="https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220226/16402516458648251645864825235pN5IJY.png" alt="image-20220226164025008" style="zoom:18%;" /> 注意：`if (nums[left] <= nums[mid])`一定需要包含`=`；如果没有包含，左区间收缩会出现错误

例如样例：`nums = {3, 1}, target = 1`