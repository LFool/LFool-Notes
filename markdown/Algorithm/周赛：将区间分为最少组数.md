# å‘¨èµ›ï¼šå°†åŒºé—´åˆ†ä¸ºæœ€å°‘ç»„æ•°

[646. æœ€é•¿æ•°å¯¹é“¾](https://leetcode.cn/problems/maximum-length-of-pair-chain/)

[6178. å°†åŒºé—´åˆ†ä¸ºæœ€å°‘ç»„æ•°](https://leetcode.cn/problems/divide-intervals-into-minimum-number-of-groups/)



æœ¬æ¬¡å‘¨èµ›çš„ç¬¬ä¸‰é¢˜ [å°†åŒºé—´åˆ†ä¸ºæœ€å°‘ç»„æ•°](https://leetcode.cn/problems/divide-intervals-into-minimum-number-of-groups/) å’ŒæŸä¸€å¤©çš„æ¯æ—¥ä¸€é¢˜ [æœ€é•¿æ•°å¯¹é“¾](https://leetcode.cn/problems/maximum-length-of-pair-chain/) å¾ˆåƒï¼ï¼

è¿™é‡Œç»™å‡ºä¸‰ç§æ€è·¯ï¼š**<font color='red'>ã€Œè´ªå¿ƒ + å †ã€ã€Œçº¿æ®µæ ‘ã€ã€Œå·®åˆ†æ•°ç»„ã€</font>**

### <font color=#1FA774>è´ªå¿ƒ + å †</font>

é¦–å…ˆæ’ä¸ªåºï¼šå…ˆæŒ‰ç…§`left`æ’åºï¼Œå¦‚æœç›¸åŒï¼Œå†æŒ‰`right`æ’åº

å †ä¸­å­˜æ”¾ç€æ¯ä¸€ä¸ªåˆ†ç»„ä¸­ç»“å°¾å…ƒç´ å€¼ï¼Œå³åˆ†ç»„çš„æœ€å¤§å…ƒç´ å€¼

- å¦‚æœå½“å‰åŒºé—´çš„å·¦è¾¹ç•Œ <= å †é¡¶å…ƒç´ ï¼Œè¯´æ˜æ‰€æœ‰åˆ†ç»„ç»“å°¾å€¼å‡ >= å½“å‰åŒºé—´çš„å·¦è¾¹ç•Œï¼Œåªèƒ½æ–°åˆ›ä¸€ä¸ªåˆ†ç»„

- å¦‚æœå½“å‰åŒºé—´çš„å·¦è¾¹ç•Œ > å †é¡¶å…ƒç´ ï¼Œè¯´æ˜å¯ä»¥æ¥åœ¨å †é¡¶å…ƒç´ åé¢ã€‚ä¹Ÿå¯ä»¥æ¥åœ¨å…¶ä»–æ¯”å·¦è¾¹ç•Œå°çš„å…ƒç´ åé¢ï¼Œå…¶æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºæ•°ç»„æ˜¯æŒ‰ç…§`left`æ’åºï¼Œå½“å‰åŒºé—´å¯ä»¥æ¥çš„å…ƒç´ ï¼Œé‚£ä¹ˆåç»­åŒºé—´ä¹Ÿä¸€å®šå¯ä»¥æ¥

å¯¹äºä¸Šè¿°ç¬¬äºŒç§æƒ…å†µï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­

å‡è®¾å½“å‰å †ä¸­å…ƒç´ ä¸ºï¼š2 5 8 15ï¼Œå…¶ä¸­ 2 ä¸ºå †é¡¶ï¼Œæ­¤æ—¶è¦åŠ å…¥åŒºé—´`[10, 20]`ï¼Œå¯ä»¥æ¥åœ¨ 2 åé¢ï¼Œä¹Ÿå¯ä»¥æ¥åœ¨ 5 æˆ– 8 åé¢ï¼Œæ•ˆæœéƒ½æ˜¯ç­‰ä»·çš„

å¦‚æœæ¥åœ¨ 5 åé¢ï¼Œåç»­åŒºé—´å·¦è¾¹ç•Œä¸€å®š >= 10ï¼Œæ‰€ä»¥åç»­åŒºé—´ä¸€å®šå¯ä»¥æ¥åœ¨ 2 æˆ– 8 åé¢

ä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼Œæ¯æ¬¡éƒ½æ¥åœ¨å †é¡¶å…ƒç´ åé¢å³å¯ï¼ï¼

```java
public int minGroups(int[][] intervals) {
    // æœ€å°å †
    Queue<Integer> pq = new PriorityQueue<>();
    // æ’åº
    Arrays.sort(intervals, (a, b) -> {
        if (a[0] != b[0]) return a[0] - b[0];
        else return a[1] - b[1];
    });
    for (int[] cur : intervals) {
        int left = cur[0], right = cur[1];
        // å¦‚æœå †ä¸ºç©ºï¼Œç›´æ¥åŠ å…¥å †ä¸­
        if (pq.isEmpty()) pq.offer(right);
        else {
            // left <= pq.peek() è¡¨ç¤ºå½“å‰åŒºé—´æ— æ³•æ¥åœ¨ä»»ä½•ä¸€ä¸ªåˆ†ç»„åé¢ï¼Œåªèƒ½æ–°åˆ›ä¸€ä¸ªåˆ†ç»„
            if (left <= pq.peek()) pq.offer(right);
            else {
                // è¡¨ç¤ºå½“å‰åŒºé—´å¯ä»¥æ¥åœ¨æœ€å°åˆ†ç»„åé¢
                pq.poll();
                pq.offer(right);
            }
        }
    }
    return pq.size();
}
```

### <font color=#1FA774>çº¿æ®µæ ‘</font>

**å…³äºçº¿æ®µæ ‘çš„è¯¦è§£å¯è§ [çº¿æ®µæ ‘è¯¦è§£](./çº¿æ®µæ ‘è¯¦è§£.html) ğŸ”¥ğŸ”¥ğŸ”¥**

å¦‚æœä½¿ç”¨çº¿æ®µæ ‘å»è§£å†³ï¼Œå¯ä»¥ç›´æ¥å¥—æ¨¡ç‰ˆï¼Œè¯¦è§£ä¸­æœ‰è¯¦ç»†è¯´æ˜ï¼ï¼è¿™é‡Œæ˜¯å…³äº**ã€ŒåŒºé—´æœ€å€¼ã€**çš„çº¿æ®µæ ‘ç±»å‹

æœ¬é¢˜ç›´æ¥è½¬æ¢æˆè®¡ç®—åŒºé—´é‡å çš„æœ€å¤§é«˜åº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºé«˜åº¦ä¸º 3ï¼š

![8](https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220911/1407101662876430pwTqXa8.svg)

```java
class Solution {
    public int minGroups(int[][] intervals) {
        for (int[] cur : intervals) {
            update(root, 1, N, cur[0], cur[1], 1);
        }
        // æ ¹èŠ‚ç‚¹è¡¨ç¤ºæ•´ä¸ªåŒºé—´çš„æœ€å€¼
        return root.val;
    }
    // ---------- ä»¥ä¸‹æ˜¯æ¨¡ç‰ˆ ----------
    class Node {
        Node left, right;
        int val, add;
    }
    private int N = (int) 1e6;
    private Node root = new Node();
    public void update(Node node, int start, int end, int l, int r, int val) {
        if (l <= start && end <= r) {
            node.val += val;
            node.add += val;
            return ;
        }
        pushDown(node);
        int mid = (start + end) >> 1;
        if (l <= mid) update(node.left, start, mid, l, r, val);
        if (r > mid) update(node.right, mid + 1, end, l, r, val);
        pushUp(node);
    }
    public int query(Node node, int start, int end, int l, int r) {
        if (l <= start && end <= r) return node.val;
        pushDown(node);
        int mid = (start + end) >> 1, ans = 0;
        if (l <= mid) ans = query(node.left, start, mid, l, r);
        if (r > mid) ans = Math.max(ans, query(node.right, mid + 1, end, l, r));
        return ans;
    }
    private void pushUp(Node node) {
        // æ›´æ–°åŒºé—´æœ€å€¼
        node.val = Math.max(node.left.val, node.right.val);
    }
    private void pushDown(Node node) {
        if (node.left == null) node.left = new Node();
        if (node.right == null) node.right = new Node();
        if (node.add == 0) return ;
        node.left.val += node.add;
        node.right.val += node.add;
        // å¯¹åŒºé—´è¿›è¡Œã€ŒåŠ å‡ã€çš„æ›´æ–°æ“ä½œï¼Œä¸‹æ¨æ‡’æƒ°æ ‡è®°æ—¶éœ€è¦ç´¯åŠ èµ·æ¥ï¼Œä¸èƒ½ç›´æ¥è¦†ç›–
        node.left.add += node.add;
        node.right.add += node.add;
        node.add = 0;
    }
}
```

### <font color=#1FA774>å·®åˆ†æ•°ç»„</font>

**å…³äºå·®åˆ†æ•°ç»„çš„è¯¦è§£å¯è§ [å·®åˆ†æ•°ç»„](./å·®åˆ†æ•°ç»„æŠ€å·§.html) ğŸ”¥ğŸ”¥ğŸ”¥**

åœ¨å‰ä¸€ç§çº¿æ®µæ ‘æ–¹æ³•ä¸­ï¼Œç›´æ¥è½¬æ¢æˆè®¡ç®—åŒºé—´é‡å çš„æœ€å¤§é«˜åº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ã€Œå·®åˆ†æ•°ç»„ã€è®¡ç®—å‡ºæ¯ä¸ªåŒºé—´çš„é‡å é«˜åº¦

```java
public int minGroups(int[][] intervals) {
    int max = intervals[0][1];
    for (int[] interval : intervals) {
        max = Math.max(max, interval[1]);
    }
    int[] diff = new int[max + 1];
    for (int[] interval : intervals) {
        diff[interval[0]] += 1;
        if (interval[1] + 1 <= max) {
            diff[interval[1] + 1] -= 1;
        }
    }
    int t = 0, ans = 0;
    for (int i = 1; i <= max; i++) {
        t = t + diff[i];
        ans = Math.max(ans, t);
    }
    return ans;
}
```

