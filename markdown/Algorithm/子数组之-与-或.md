# å­æ•°ç»„ä¹‹ã€Œä¸ã€ã€Œæˆ–ã€

[6189. æŒ‰ä½ä¸æœ€å¤§çš„æœ€é•¿å­æ•°ç»„](https://leetcode.cn/problems/longest-subarray-with-maximum-bitwise-and/)

[2411. æŒ‰ä½æˆ–æœ€å¤§çš„æœ€å°å­æ•°ç»„é•¿åº¦](https://leetcode.cn/problems/smallest-subarrays-with-maximum-bitwise-or/)



æœ¬ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹å­æ•°ç»„å’Œã€Œä¸ã€ã€Œæˆ–ã€ç›¸ç»“åˆçš„ä¸¤ä¸ªé¢˜ç›®

### <font color=#1FA774>æŒ‰ä½ä¸æœ€å¤§çš„æœ€é•¿å­æ•°ç»„</font>

**é¢˜ç›®è¯¦æƒ…å¯è§ [æŒ‰ä½ä¸æœ€å¤§çš„æœ€é•¿å­æ•°ç»„](https://leetcode.cn/problems/longest-subarray-with-maximum-bitwise-and/)**

æ¯”èµ›çš„æ—¶å€™æµªè´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œæ²¡æœ‰ä¸€çœ¼çœ‹å‡ºé¢˜ç›®ä¸­éšè—çš„ç»†èŠ‚

è¿™é‡Œå°±éœ€è¦æ¸…æ¥šã€Œä¸ã€è¿ç®—çš„ä¸€ä¸ªç‰¹ç‚¹ï¼š`x & x = x`ï¼›`x ^ y = y`ï¼Œå…¶ä¸­`y < x`

ç®€å•æ¥è¯´ï¼Œç›¸åŒçš„ä¸¤ä¸ªæ•°ç›¸ä¸ï¼Œè¿˜æ˜¯ç­‰äºåŸæ•°ï¼›ä¸åŒçš„ä¸¤ä¸ªæ•°ç›¸ä¸ï¼Œç»“æœçš„æ˜¯è¾ƒå°çš„é‚£ä¸ªæ•°

å¯¹äºä¸€ä¸ªæ•°ç»„`[a, b, c, d]`ï¼Œä»¥`a`å¼€å¤´çš„æ‰€æœ‰å­æ•°ç»„æœ‰ï¼š`[a], [a, b], [a, b, c], [a, b, c, d]`

é‚£ä¹ˆä¸€å®šå­˜åœ¨ï¼š`(a) >= (a & b) >= (a & b & c) >= (a & b & c & d)`

æ‰€ä»¥ï¼Œã€Œä¸è¿ç®—ã€å…·æœ‰å•è°ƒéé€’å¢çš„ç‰¹æ€§

æ—¢ç„¶éœ€è¦å¾—åˆ°ã€ŒæŒ‰ä½ä¸ã€æœ€å¤§çš„æœ€é•¿å­æ•°ç»„ï¼Œç­‰ä»·äºæ‰¾æœ€å¤§å€¼è¿ç»­çš„æœ€å¤§é•¿åº¦

ä¾‹ï¼š`1234452444332`ï¼Œè¿™ä¸ªä¾‹å­ä¸­æœ€å¤§æœ€é•¿å­æ•°ç»„ä¸º`444`

ä¸‹é¢ç»™å‡ºä»£ç ï¼š

```java
public int longestSubarray(int[] nums) {
    // æ±‚å‡ºæœ€å¤§å€¼
    int max = Arrays.stream(nums).max().getAsInt();
    int ans = 0, cnt = 0;
    for (int i = 0; i < nums.length; i++) {
        if (nums[i] != max) cnt = 0;
        else cnt++;
        ans = Math.max(ans, cnt);
    }
    return ans;
}
```

### <font color=#1FA774>æŒ‰ä½æˆ–æœ€å¤§çš„æœ€å°å­æ•°ç»„é•¿åº¦</font>

**é¢˜ç›®è¯¦æƒ…å¯è§ [æŒ‰ä½æˆ–æœ€å¤§çš„æœ€å°å­æ•°ç»„é•¿åº¦](https://leetcode.cn/problems/smallest-subarrays-with-maximum-bitwise-or/)**

å’Œã€Œä¸è¿ç®—ã€ç›¸åŒï¼Œã€Œæˆ–è¿ç®—ã€ä¹Ÿæœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼š`x | x = x`ï¼›`x | y = y`ï¼Œå…¶ä¸­`y > x`

ç®€å•æ¥è¯´ï¼Œç›¸åŒçš„ä¸¤ä¸ªæ•°ç›¸æˆ–ï¼Œè¿˜æ˜¯ç­‰äºåŸæ•°ï¼›ä¸åŒçš„ä¸¤ä¸ªæ•°ç›¸æˆ–ï¼Œç»“æœçš„æ˜¯è¾ƒå¤§çš„é‚£ä¸ªæ•°

åŒæ ·çš„ï¼Œä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä½†æ˜¯ä¸ºäº†å’Œæœ¬é¢˜ç›¸äº’å‘¼åº”ï¼ŒæŠŠä¾‹å­ç¨å¾®æ”¹æ”¹

å¯¹äºä¸€ä¸ªæ•°ç»„`[a, b, c, d]`ï¼Œä»¥`d`ç»“å°¾çš„æ‰€æœ‰å­æ•°ç»„æœ‰ï¼š`[a, b, c, d], [b, c, d], [c, d], [d]`

é‚£ä¹ˆä¸€å®šå­˜åœ¨ï¼š`(a | b | c | d) >= (b | c | d) >= (c | d) >= (d)`

æ‰€ä»¥ï¼Œã€Œæˆ–è¿ç®—ã€å…·æœ‰å•è°ƒéé€’å‡çš„ç‰¹æ€§

å…ˆç»™å‡ºä»£ç ï¼Œç»“åˆæ³¨é‡Šé£Ÿç”¨æ›´ä½³ï¼š

```java
public int[] smallestSubarrays(int[] nums) {
    int n = nums.length;
    int[] ans = new int[n];
    // ä»å·¦å‘å³éå† ğŸ‘‰
    for (int i = 0; i < n; i++) {
        int x = nums[i];
        ans[i] = 1;
        // ä» i - 1 å‘å·¦éå† ğŸ‘ˆ
        for (int j = i - 1; j >= 0; j--) {
            // ç›¸ç­‰è¡¨ç¤º x = nums[j]ï¼Œä¸ºäº†æœ€çŸ­ï¼Œé€‰æ‹©ä¸ç›¸æˆ–
            // è€Œä¸” j - 1 åŠå‰é¢çš„éƒ½ä¸ç”¨å†åˆ¤æ–­äº†ï¼Œå› ä¸º nums[j - 1] >= nums[j]ï¼Œæ‰€ä»¥ä¸éœ€è¦åˆ¤æ–­
            if ((nums[j] | x) == nums[j]) break;
            // æ³¨æ„ï¼šnums[j] ä¼šç´¯è®¡æˆ–è¿ç®—
            nums[j] |= x;
            // æ›´æ–°ç»“æœ
            ans[j] = i - j + 1;
        }
    }
    return ans;
}
```
