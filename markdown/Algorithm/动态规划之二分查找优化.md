# åŠ¨æ€è§„åˆ’ä¹‹äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–

[1235. è§„åˆ’å…¼èŒå·¥ä½œ](https://leetcode.cn/problems/maximum-profit-in-job-scheduling/)

[2008. å‡ºç§Ÿè½¦çš„æœ€å¤§ç›ˆåˆ©](https://leetcode.cn/problems/maximum-earnings-from-taxi/)

[1751. æœ€å¤šå¯ä»¥å‚åŠ çš„ä¼šè®®æ•°ç›® II](https://leetcode.cn/problems/maximum-number-of-events-that-can-be-attended-ii/)



æœ¬ç¯‡æ–‡ç« æ€»ç»“ã€ŒåŠ¨æ€è§„åˆ’ã€ç»“åˆã€ŒäºŒåˆ†æŸ¥æ‰¾ã€æ¥ä¸€æ³¢ä¼˜åŒ–ï¼ï¼

### <font color=#1FA774>è§„åˆ’å…¼èŒå·¥ä½œ</font>

**é¢˜ç›®è¯¦æƒ…å¯è§ [è§„åˆ’å…¼èŒå·¥ä½œ](https://leetcode.cn/problems/maximum-profit-in-job-scheduling/)**

å…¶å®å’Œã€ŒèƒŒåŒ…é—®é¢˜ã€å¾ˆåƒï¼Œ**å…³äºã€ŒèƒŒåŒ…é—®é¢˜ã€æ€»ç»“å¯è§ [ç»å…¸åŠ¨æ€è§„åˆ’ï¼š0-1 èƒŒåŒ…é—®é¢˜](./ç»å…¸åŠ¨æ€è§„åˆ’ï¼š0-1èƒŒåŒ…é—®é¢˜.html)**

é¦–å…ˆå®šä¹‰ä¸€ä¸‹`dp[i]`ï¼šè¡¨ç¤ºå¯¹äºå‰`i`ä¸ªå…¼èŒï¼Œå¯ä»¥è·å¾—çš„æœ€å¤§æŠ¥é…¬

å¯¹äºæ¯ä¸ªå…¼èŒï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¹Ÿå¯ä»¥ä¸é€‰æ‹©ã€‚å½“å¤„äºç¬¬`i`ä¸ªå…¼èŒæ—¶ï¼Œå¯¹åº”çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š
$$
dp[i] = \max(dp[i - 1], dp[j] + profit[i])
$$
å…¶ä¸­ $j$ ä¸ºæ»¡è¶³ $endTime[j] \le startTime[i]$ çš„æœ€å¤§å€¼

ç°åœ¨çš„é—®é¢˜å°±è½¬åŒ–æˆå¦‚ä½•å¿«é€Ÿæ‰¾åˆ°è¿™ä¸ª`j`ï¼Œå…ˆå°†æ‰€æœ‰å…¼èŒæ ¹æ®`endTime`é€’å¢æ’åºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![3](https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20221022/1938371666438717EtTtpu3.svg)

åœ¨æœ‰åºåºåˆ—ä¸­å¿«é€ŸæŸ¥æ‰¾ä¸€ä¸ªå€¼ï¼Œå¾ˆæ˜æ˜¾ç”¨äºŒåˆ†æœç´¢ ğŸ”

ä¸‹é¢ç»™å‡ºå®Œæ•´ä»£ç ï¼š

```java
public int jobScheduling(int[] startTime, int[] endTime, int[] profit) {
    int n = startTime.length;
    // æŠ€å·§ï¼šå€ŸåŠ©ä¸‹æ ‡æ’åº
    Integer[] idx = IntStream.range(0, n).boxed().toArray(Integer[]::new);
    Arrays.sort(idx, (a, b) -> endTime[a] - endTime[b]);
    int[] dp = new int[n + 1];
    for (int i = 1; i <= n; i++) {
        // åœ¨ [l, r] åŒºé—´å†…ï¼ŒæŸ¥æ‰¾ç›®æ ‡å€¼ target
        int l = 0, r = i - 1, target = startTime[idx[i - 1]];
        while (l < r) {
            int m = l + r + 1 >> 1;
            if (endTime[idx[m - 1]] <= target) l = m;
            else r = m - 1;
        }
        dp[i] = Math.max(dp[i - 1], dp[l] + profit[idx[i - 1]]);
    }
    return dp[n];
}
```

### <font color=#1FA774>å‡ºç§Ÿè½¦çš„æœ€å¤§ç›ˆåˆ©</font>

**é¢˜ç›®è¯¦æƒ…å¯è§ [å‡ºç§Ÿè½¦çš„æœ€å¤§ç›ˆåˆ©](https://leetcode.cn/problems/maximum-earnings-from-taxi/)**

å’Œä¸Šä¸€ä¸ªé¢˜ç›®ï¼Œä¸€æ¨¡ä¸€æ ·ï¼Œç›´æ¥ç»™å‡ºå®Œæ•´ä»£ç ï¼š

```java
public long maxTaxiEarnings(int n, int[][] rides) {
    int rn = rides.length;
    Integer[] idx = IntStream.range(0, rn).boxed().toArray(Integer[]::new);
    Arrays.sort(idx, (a, b) -> rides[a][1] - rides[b][1]);
    long[] dp = new long[rn + 1];
    for (int i = 1; i <= rn; i++) {
        int l = 0, r = i - 1, target = rides[idx[i - 1]][0];
        while (l < r) {
            int m = l + r + 1 >> 1;
            if (rides[idx[m - 1]][1] <= target) l = m;
            else r = m - 1;
        }
        dp[i] = Math.max(dp[i - 1], dp[l] + rides[idx[i - 1]][2] + rides[idx[i - 1]][1] - rides[idx[i - 1]][0]);
    }
    return dp[rn];
}
```
### <font color=#1FA774>æœ€å¤šå¯ä»¥å‚åŠ çš„ä¼šè®®æ•°ç›® II</font>

**é¢˜ç›®è¯¦æƒ…å¯è§ [æœ€å¤šå¯ä»¥å‚åŠ çš„ä¼šè®®æ•°ç›® II](https://leetcode.cn/problems/maximum-number-of-events-that-can-be-attended-ii/)**

è¿™ä¸ªé¢˜ç›®ç•¥å¾®æœ‰ä¸€ç‚¹å‡çº§ï¼ï¼æœ‰ä¸€ä¸ªæ•´æ•°`k`çš„é™åˆ¶ï¼Œè¡¨ç¤ºä½ èƒ½å‚åŠ çš„æœ€å¤šä¼šè®®æ•°ç›®ï¼Œæ›´åƒèƒŒåŒ…é—®é¢˜äº†ï¼ï¼ï¼

è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼šä¸èƒ½åŒæ—¶å‚åŠ ä¸€ä¸ªå¼€å§‹æ—¥æœŸä¸å¦ä¸€ä¸ªç»“æŸæ—¥æœŸç›¸åŒçš„ä¸¤ä¸ªä¼šè®®ï¼Œæ‰€ä»¥ $j$ ä¸ºæ»¡è¶³ $events[j][1] < events[i][0]$ çš„æœ€å¤§å€¼

æ›´æ–°ä¸€ä¸‹`dp`çš„å®šä¹‰ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨äºŒç»´ï¼š`dp[i][j]`è¡¨ç¤ºå¯¹äºå‰`i`ä¸ªä¼šè®®ï¼Œå½“å‰æœ€å¤šå‚ä¸çš„ä¼šè®®æ•°é‡ä¸º`j`ï¼Œå¯ä»¥è·å¾—çš„ä¼šè®®ä»·å€¼æœ€å¤§å’Œ

å¯¹åº”çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š
$$
dp[i][j] = \max(dp[i - 1][j], dp[j][j - 1] + events[i][2])
$$


ä¸‹é¢ç»™å‡ºå®Œæ•´ä»£ç ï¼š

```java
public int maxValue(int[][] events, int k) {
    int n = events.length;
    Integer[] idx = IntStream.range(0, n).boxed().toArray(Integer[]::new);
    Arrays.sort(idx, (a, b) -> events[a][1] - events[b][1]);
    int[][] dp = new int[n + 1][k + 1];
    for (int i = 1; i <= n; i++) {
        // åœ¨ [l, r] åŒºé—´å†…ï¼ŒæŸ¥æ‰¾ç›®æ ‡å€¼ target
        int l = 0, r = i - 1, target = events[idx[i - 1]][0];
        while (l < r) {
            int m = l + r + 1 >> 1;
            if (events[idx[m - 1]][1] < target) l = m;
            else r = m - 1;
        }
        for (int j = 1; j <= k; j++) {
            dp[i][j] = Math.max(dp[i - 1][j], dp[l][j - 1] + events[idx[i - 1]][2]);
        }
    }
    return dp[n][k];
}
```
