# 注解

### <font color=#1FA774>什么是注解</font>

Annotation 是从 JDK5.0 开始引入的新技术

Annotation 的作用

- 不是程序本身，可以对程序作出解释
- **<font color='red'>可以被其他程序 (如：编译器等) 读取</font>**

Annotation 的格式

- 注解是以`@name`在代码中存在，还可以添加一些参数值，例如：`@SuppressWarnings(value = "unchecked")`

Annotation 在哪里使用？

- 可以附加在 package、class、method、field 等上面，相当于给他们添加了额外的辅助信息，我们可以通过**反射机制**编程实现对这些元数据的访问

### <font color=#1FA774>内置注解</font>

`@Override`：定义在`java.lang.Override`中，此注解只适用于**修辞方法**，表示一个方法声明打算重写超类中的另一个方法声明

`@Deprecated`：定义在`java.lang.Deprecated`中，此注解可以用于**修饰方法、属性、类**，表示不鼓励程序员使用这些元素，通常是因为它很危险或者存在更好的选择

`@SuppressWarnings`：定义在`java.lang.SuppressWarnings`中，用来抑制编译时的警告信息，与前两个注解不同的是需要添加一个参数才能正确使用，这些参数都是已经定义好了的，选择性使用即可

- `@SuppressWarnings("all")`
- `@SuppressWarnings("unchecked")`
- `@SuppressWarnings(value = {"unchecked", "deprecation"})`
- ...

### <font color=#1FA774>元注解</font>

元注解的作用：负责注解其他注解

Java 定义了 4 个标准的 meta-annotation 类型，他们被用来提供对其他 annotation 类型作说明

这些类型和它们所支持的类在`java.lang.annotation`包中可以找到：`@Target`、`@Retention`、`@Documented`、`@Inherited`

- `@Target`：用于描述注解的使用范围 (即：被描述的注解可以用在什么地方)
- `@Retention`：表示需要在什么级别保存该注解信息，用于描述注解的生命周期 (SOURCE < CLASS < **RUNTIME**)
- `@Documented`：说明该注解将被包含在 Javadoc 中
- `@Inherited`：说明子类可以继承父类中的该注解

```java
// Target 表示该注解可以用在什么地方：类，方法
@Target(value = {ElementType.TYPE, ElementType.METHOD})
// Retention 表示该注解在什么地方还有效：SOURCE < CLASS < RUNTIME
@Retention(value = RetentionPolicy.RUNTIME)
// Documented 表示该注解将生成在 Javadoc 中
@Documented
// Inherited 表示子类可以继承该注解
@Inherited
public @interface MyAnnotation {
}
```

### <font color=#1FA774>自定义注解</font>

使用`@interface`自定义注解时，自动继承`java.lang.annotation.Annotation`接口

- `@interface`用来声明一个注解，格式：`public @interface name {}`
- 其中的每一个方法实际上是声明了一个配置参数
- 方法的名称就是参数的名称
- 返回值类型就是参数的类型 (返回值只能是基本类型、对象、String、enum)
- 可以通过`default`来声明参数的默认值
- 如果只有一个参数成员，一般参数名为`value`
- 注解元素必须要有值，在定义注解元素时，经常使用「空字符串、0」作为默认值

```java
@Target(value = {ElementType.TYPE, ElementType.METHOD})
@Retention(value = RetentionPolicy.RUNTIME)
public @interface MyAnnotation {
    // 定义注解参数的格式：参数类型 + 名字 + ()
    String name();
    int age() default 0;
    int id() default -1;
    String[] schools() default {"school1", "school2"};
}
public class MyAnnotationTest {
    @MyAnnotation(name = "张三", age = 18, id = 1, schools = {"school3"})
    public void test01() {
    }
    @MyAnnotation(name = "张三")
    public void test02() {
    }
}
```