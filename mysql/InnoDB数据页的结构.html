<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<link rel="icon" href="https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220108/01012216415748821641574882653Cdc3fw.ico" type="image/x-icon">
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/LFool/image-hosting@master/20220108/01012216415748821641574882653Cdc3fw.ico" type="image/x-icon">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-227874201-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-227874201-2');
</script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4LE2XZ6JLM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4LE2XZ6JLM');
</script>
<link href='https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { -webkit-user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }


/*快速自定义配置*/
:root {
    --monospace: "JetBrains Mono", "Fira Code", "Cascadia Code", Menlo, "Ubuntu Mono", Consolas, HYZhengYuan; /*代码字体*/
    --text-font: var(--monospace); /*正文字体*/
    --title-font: var(--monospace); /*标题字体*/
    --latex-font: var(--monospace); /*LaTeX字体(不含英语)*/
    --text-line-height: 1.6; /*正文行间距*/
    --code-line-height: 1.6; /*代码块行间距*/
    --p-spacing: 0.8rem; /*段间距*/
    --text-size: 12px;
}/*
 * Copyright (C) 2018 Drake, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * GitHub https://github.com/liangjingkanji/DrakeTyporaTheme
 */
@import url();
@include-when-export url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap');

:root {
    --text-color: #202124;
    --blur-text-color: #c8c8c8;
    --bg-color: #ffffff;
    --control-text-color: var(--text-color);
    --meta-content-color: var(--text-color);
    --active-file-border-color: var(--drake-accent);
    --rawblock-edit-panel-bd: var(--code-block-bg-color);
    --item-hover-bg-color: #E5E5E596;
    --active-file-bg-color: var(--item-hover-bg-color);

    --blur-text-color: rgba(32, 33, 36, 0.5);
    --drake-accent: #5784ec;
    --drake-highlight: #3a474e;
    --a-color: #1769e0;
    --variable-color: #d01884;
    --outline-active-color: var(--a-color);
    --code-block-bg-color: #f8f9fa;
    --code-block-color: #3a474e;
    --title-color: #202124;
    --blockquote-border-color: #275796;
    --blockquote-color: #275796;
    --blockquote-bg-color: #e5f4fd;
    --strong-color: var(--title-color);
    --h2-underline-color: var(--title-color);
    --horizontal-divider-color: var(--title-color);
    --height-light-color: var(--text-color);
    --height-light-border-color: var(--text-color);
    --yaml-color: #777777;
    --yaml-bg-color: #f7f7f7;
    --footnotes-bg-color: #3c3d3e;
    --footnotes-highlight: #FFD760;
    --table-border-color: #dadce0;
    --table-header-bg-color: #f1f3f4;
    --table-bg-color: var(--bg-color);
    --table-n2-bg-color: var(--bg-color);
    --input-bg-color: var(--item-hover-bg-color);
    --btn-hover-bg-color: var(--item-hover-bg-color);
    --checkbox-checked: url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cpath d='M425.984 726.016l384-384-59.99-61.995-324.01 324.011-152.021-152.021L213.973 512zm384-598.016q36.01 0 61.013 25.984T896 213.974v596.01q0 34.005-25.003 59.99t-61.013 25.983h-596.01q-36.011 0-61.014-25.984t-25.003-59.989v-596.01q0-34.006 25.003-59.99T213.973 128h596.011z' fill='%2365b73b'/%3E%3C/svg%3E");
    --checkbox-unchecked: url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cpath d='M810.667 213.333v597.334H213.333V213.333h597.334m0-85.333H213.333C166.4 128 128 166.4 128 213.333v597.334C128 857.6 166.4 896 213.333 896h597.334C857.6 896 896 857.6 896 810.667V213.333C896 166.4 857.6 128 810.667 128z' fill='%23333333'/%3E%3C/svg%3E");
}

html {
    font-size: var(--text-size);
}

body {
    font-family: var(--text-font) !important;
    color: var(--text-color);
    -webkit-font-feature-settings: "liga" on, "calt" on;
    -webkit-font-smoothing: subpixel-antialiased;
    text-rendering: optimizeLegibility;
    letter-spacing: 0;
    margin: 0;
    overflow-x: hidden;
}

p {
    line-height: var(--text-line-height);
}

/*code block*/
.md-fences {
    font-size: 1rem;
    padding: 12px !important;
    border-radius: 8px;
    word-wrap: normal;
    background-color: var(--code-block-bg-color);
    color: var(--code-block-color);
    border: .1em solid #e8eaed;
    line-height: var(--code-line-height);
}

/*inline latex*/
.MathJax {
    font-size: 120% !important;
}
.MathJax text, .MathJax use {
    font-family: var(--latex-font);
}
/*math-block latex*/
.md-math-block .MathJax {
    font-size: 130% !important;
}

/*mermaid*/
[mermaid-type="journey"] line {
    stroke: #7a7a7a !important;
}
[mermaid-type="journey"] .label {
    color: #333 !important;
}
[id^=mermaidChart] .relationshipLabelBox {
    fill: var(--bg-color) !important;
    opacity: 1 !important;
    background-color: var(--bg-color) !important;
}
[id^=mermaidChart] .legend {
    fill: var(--text-color) !important;
}
[id^=mermaidChart] g.label {
    font-size: 1rem !important;
}
[id^=mermaidChart] line.divider {
    stroke: var(--table-border-color) !important;
}
[id^=mermaidChart] span.nodeLabel {
    color: var(--code-block-color) !important;
    line-height: 1.8rem;
}
tspan {
    color: var(--text-color)
}
[id^=mermaidChart] .entityLabel {
    fill: var(--code-block-color) !important;
}
[id^=mermaidChart] {
    fill: var(--text-color) !important;
}
[id^=mermaidChart] rect.rect {
    fill: rgba(175, 255, 212, 0.3) !important;
}
.md-diagram-panel-preview text.actor > tspan { /*方块文字*/
    fill: var(--code-block-color) !important;
    stroke: none !important;
    font-family: var(--text-font) !important;
    font-size: 1rem !important;
}
.md-diagram-panel-preview .actor, .md-diagram-panel-preview .entityBox { /*方块*/
    stroke: var(--table-border-color) !important;
    fill: var(--code-block-bg-color) !important;
}
.md-diagram-panel-preview .actor-line { /*竖线*/
    stroke: var(--text-color) !important;
    stroke-width: 1px;
}
.md-diagram-panel-preview .messageLine0 { /*横线*/
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: var(--text-color) !important;
}
.md-diagram-panel-preview .messageLine1 { /*虚线*/
    stroke-width: 1.5 !important;
    stroke-dasharray: 2, 2 !important;
    stroke: var(--text-color) !important;
}
.md-diagram-panel-preview .messageText { /*描述文字*/
    fill: var(--text-color) !important;
    font-family: var(--text-font) !important;
    font-size: 1rem !important;
}
.md-diagram-panel-preview .activation0 { /*长方形*/
    fill: #e6e6e6 !important;
    stroke: var(--text-color) !important;
}
.md-diagram-panel-preview .labelText, .md-diagram-panel-preview .labelText > tspan { /*循环标记*/
    fill: var(--code-block-color) !important;
    font-family: var(--text-font) !important;
    font-size: 1rem !important;
    dominant-baseline: unset;
    alignment-baseline: unset;
}
.md-diagram-panel-preview .labelBox { /*循环标记背景*/
    stroke: var(--table-border-color) !important;
    fill: var(--code-block-bg-color) !important;
}
.md-diagram-panel-preview .loopLine { /*循环标记虚线*/
    stroke: var(--text-color) !important;
}
.md-diagram-panel-preview .loopText, .md-diagram-panel-preview .loopText > tspan { /*循环名称*/
    fill: var(--text-color) !important;
    font-size: 1rem !important;
}
.md-diagram-panel-preview .sequenceNumber { /*序号*/
    fill: var(--bg-color) !important;
}
pre.md-fences-advanced.md-focus .md-fences-adv-panel {
    border: none;
}
.md-diagram-panel-preview .edgePath .path { /*箭头*/
    stroke: var(--text-color) !important;
}
.md-diagram-panel-preview .edgeLabel rect { /*条件文字背景*/
    fill: var(--bg-color) !important;
}
.md-diagram-panel-preview .edgeLabel span { /*条件文字*/
    color: var(--text-color);
}
.md-diagram-panel-preview .node rect,
.md-diagram-panel-preview .node circle,
.md-diagram-panel-preview .node ellipse,
.md-diagram-panel-preview .node polygon,
.md-diagram-panel-preview .node path { /*形状*/
    stroke: var(--table-border-color) !important;
    fill: var(--code-block-bg-color) !important;
}
#write .md-diagram-panel .md-diagram-panel-preview div { /*形状内文字*/
    color: var(--code-block-color);
    font-family: var(--text-font) !important;
    font-size: 1rem !important;
}

/*code snippet*/
#write code, tt {
    margin: 0 4px;
    color: var(--drake-highlight);
    border: .1rem solid #e8eaed;
    background: #f8f9fa;
    border-radius: 4px;
    padding: .1rem .4rem;
}

/*variable*/
var {
    color: var(--variable-color);
    font-weight: bold;
}

/*raw block*/
.md-rawblock-control:not(.md-rawblock-tooltip) {
    border-radius: 2px 0 2px 2px;
    padding: 0.2rem !important;
}
.md-rawblock:hover > .md-rawblock-container {
    background: none;
}
.md-rawblock-input {
    font-size: 1rem;
}
.md-rawblock-tooltip-btn:hover {
    background: none;
}
.md-rawblock:hover > .md-rawblock-tooltip {
    border-radius: 2px 2px 0 0;
    margin-bottom: 2px !important;
}
.md-rawblock-tooltip.md-rawblock-control {
    border-radius: 2px 2px 0 0;
    color: var(--code-block-color);
}
.md-rawblock-tooltip-name {
    color: var(--code-block-color);
    opacity: 1;
}

/*quote block*/
blockquote {
    color: var(--blockquote-color) !important;
    border-radius: 4px;
    padding: 10px 16px;
    background-color: var(--blockquote-bg-color);
    position: relative;
    border-left: none;
}

#write strong {
    color: var(--strong-color);
    font-weight: bold;
}
#write blockquote strong {
    color: var(--blockquote-color);
}

/*link*/
.on-focus-mode #write a .md-plain:hover, .on-focus-mode .md-htmlblock-container a:hover {
    border-bottom: .1rem solid var(--blur-text-color);
}
#write a .md-plain:hover, .md-htmlblock-container a:hover,
.on-focus-mode #write .md-focus a .md-plain:hover, .on-focus-mode .md-focus .md-htmlblock-container a:hover {
    border-bottom: .1rem solid var(--a-color);
}
#write a {
    color: var(--a-color);
    text-decoration: none;
}
#write h2 a .md-plain {
    border-bottom: .2rem solid var(--a-color);
}
[md-inline=link] a {
    margin: 0 .2rem;
}
#write a code, a:any-link {
    color: var(--a-color);
}
#write a code:hover {
    text-decoration: underline;
    text-underline-offset: 2px;
    text-decoration-thickness: 0.1em;
}

img {
    border-left: none;
    border-right: none;
    vertical-align: baseline;
    border-radius: 2px;
}

#write {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px 30px 100px;
}
#typora-source .CodeMirror-lines {
    max-width: 1200px;
}

#write > ul:first-child,
#write > ol:first-child {
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}

body > *:last-child {
    margin-bottom: 0 !important;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: var(--title-font);
    position: relative;
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
    color: var(--title-color);
}

h3.md-focus:before, h4.md-focus:before, h5.md-focus:before, h6.md-focus:before {
    visibility: hidden;
}

h1 {
    font-size: 2rem;
    text-align: center;
    margin-top: 0;
}

h2 {
    font-size: 1.8rem;
    margin-bottom: 1.5rem;
}

.on-focus-mode h2.md-end-block.md-heading:not(.md-focus):not(.md-focus-container):after {
    background-color: var(--blur-text-color) !important;
}

h3 {
    font-size: 1.4rem;
}

h4 {
    font-size: 1.2rem;
}

h5 {
    font-size: 1rem;
}

h6 {
    font-size: 1rem;
}

h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}

h1 tt,
h1 code {
    font-size: inherit !important;
}

h2 tt,
h2 code {
    font-size: inherit !important;
}

h3 tt,
h3 code {
    font-size: inherit !important;
}

h4 tt,
h4 code {
    font-size: inherit !important;
}

h5 tt,
h5 code {
    font-size: inherit !important;
}

h6 tt,
h6 code {
    font-size: inherit !important;
}

p, blockquote, ul, ol, dl, table {
    margin: var(--p-spacing) 0;
}

li > ol,
li > ul {
    margin: 0 0;
}
li {
    margin: 0.5em 0;
}

hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: var(--horizontal-divider-color);
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}

body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}

a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}

h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}

li p.first {
    display: inline-block;
}

ul, ol {
    padding-inline-start: 2em;
}

ul:first-child,
ol:first-child {
    margin-top: 0;
}

ul:last-child,
ol:last-child {
    margin-bottom: 0;
}

.ty-table-edit {
    margin-top: -1rem !important;
}
#write table {
    margin-top: 1rem;
    word-break: initial;
    background-color: var(--table-bg-color);
}
table tr {
    border-top: .1em solid var(--table-border-color);
    margin: 0;
    padding: 0;
}
table th {
    font-weight: bold;
    border: .1em solid var(--table-border-color);
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: .1em solid var(--table-border-color);
    margin: 0;
    padding: 6px 13px;
}
table thead {
    background-color: var(--table-header-bg-color);
}
table tr:nth-child(2n) {
    background-color: var(--table-n2-bg-color);
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

#write em {
    padding: 0 5px 0 2px;
}

#write table thead th {
    background-color: var(--table-header-bg-color);
}

/* height light */
#write mark {
    border: .1em solid var(--height-light-border-color);
    color: var(--height-light-color);
    background-color: transparent;
    padding: .1rem .5rem;
    border-radius: 2rem;
    margin: 0 .2rem;
    font-size: .95rem;
}

/*shortcut*/
kbd {
    border: .1em solid #5b5b5e;
    background: transparent;
    color: var(--text-color);
    margin: 0 .4rem;
    font-family: var(--text-font) !important;
    font-size: .95rem;
    padding: .3em .4em;
    border-radius: .4em;
    box-shadow: .1em .1em .2em rgba(0, 0, 0, 0.3);
}

#write del {
    padding: 1px 2px;
}

.md-task-list-item > input {
    margin-left: -1.3em;
}

@media print {
    html {
        font-size: 12px;
    }

    table,
    pre {
        page-break-inside: avoid;
    }

    pre {
        word-wrap: break-word;
    }
}

/*YAML*/
#write pre.md-meta-block {
    padding: 1rem;
    font-size: 1rem;
    line-height: 1.45;
    background-color: var(--yaml-bg-color);
    border: 0;
    border-radius: 2px;
    color: var(--yaml-color);
    margin-top: 0 !important;
}

.mathjax-block > .code-tooltip {
    bottom: .375rem;
}

#write > h3.md-focus:before {
    left: -1.5625rem;
    top: .375rem;
}

#write > h4.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}

#write > h5.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}

#write > h6.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}

.md-image > .md-meta {
    border-radius: 2px;
    font-family: initial;
    padding: 2px 0 0 4px;
    color: inherit;
}

.md-tag {
    color: inherit;
}

.md-toc {
    margin-top: 20px;
    padding-bottom: 20px;
}

.typora-quick-open-item {
    font-size: 1rem !important;
    height: 50px;
    padding-left: 8px;
    padding-top: 4px;
    padding-bottom: 4px;
}

#typora-quick-open {
    box-shadow: 0 0 8px #00000045;
    padding: 0;
}

.ty-quick-open-category.ty-has-prev .ty-quick-open-category-title {
    border-top: none;
}

#typora-quick-open-input {
    margin: 8px;
    box-shadow: none;
    border-radius: 2px;
}

#typora-quick-open-input input {
    font-size: 1rem;
    box-shadow: none;
    padding-top: 2px;
    padding-left: 10px;
    padding-right: 10px;
    line-height: 32px;
    max-height: 32px;
    border: none;
}

.modal-dialog#typora-quick-open {
    border-radius: 8px;
}

.ty-quick-open-category-title {
    padding-left: 8px;
    color: #BEBEBE;
    font-size: 0.8rem;
    margin-bottom: 4px;
}

.typora-quick-open-item-path {
    font-size: 0.8rem;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-top: 1px;
}

/*search input*/
.form-control {
    border: none;
    border-radius: 2px;
    box-shadow: none;
}

#md-searchpanel .btn {
    border-radius: 2px;
}

#search-panel-replaceall-btn {
    padding-right: 5px !important;
    text-align: center !important;
}

#search-panel-replace-btn {
    text-align: center !important;
}

#md-searchpanel input {
    background: var(--input-bg-color);
    border-radius: 2px;
}

.searchpanel-search-option-btn {
    border-radius: 2px;
    border: none;
    background: transparent;
    color: var(--text-color);
}

.searchpanel-search-option-btn.active {
    background: var(--text-color);
    color: var(--bg-color);
}

.form-control:focus {
    box-shadow: none;
}

#md-notification:before {
    top: 10px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header,
.context-menu,
.megamenu-content,
footer {
    font-family: initial;
}

/*sidebar*/
.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state {
    visibility: visible;
}
.file-node-content {
    display: flex;
    align-items: center;
}
.file-node-open-state {
    margin-right: .5rem;
}
.file-node-icon {
    margin-right: .5rem;
}

#typora-sidebar {
    font-size: inherit;
    font-family: var(--title-font);
}

.sidebar-tabs {
    border-bottom: none;
}

.file-list-item-summary, .file-list-item-parent-loc, .file-list-item-time, .file-list-item-summary {
    font-size: 0.9rem !important;
    font-family: var(--text-font);
}

.file-list-item-file-ext-part {
    display: none;
}

.outline-item {
    font-size: 1rem;
}

/*footnotes mark*/
#write .md-footnote {
    background-color: inherit;
    color: var(--drake-highlight);
    font-size: 0.9rem;
    border-radius: 0.9rem;
    padding-left: 0;
}

#write .md-footnote:before {
    content: "[";
}

#write .md-footnote:after {
    content: "]";
}

/*footnotes content*/
.md-hover-tip .code-tooltip-content {
    border-radius: 2px;
}

/*footnotes title*/
span.md-def-name {
    padding-right: 3ch;
    padding-left: 0;
    position: relative;
    font-weight: normal;
}

/*footnotes desc*/
.footnotes {
    font-size: 1rem;
    font-weight: normal;
    color: var(--text-color);
    position: relative;
}

/*footnotes tooltip text*/
.code-tooltip-content .md-plain {
    font-size: 0.9rem;
    font-family: inherit;
}

.code-tooltip-content code {
    padding: 0 2px;
    font-family: inherit;
    color: var(--footnotes-highlight);
    background-color: inherit;
}

.code-tooltip-content a {
    color: var(--footnotes-highlight);
}

div.code-tooltip-content {
    box-shadow: 0 0 8px #00000045;
    background: var(--footnotes-bg-color);
}

.footnotes {
    opacity: 1;
}

.md-def-name:after {
    content: ". ^";
    color: var(--text-color);
}

.md-def-footnote .md-def-name:before {
    content: "";
    color: var(--text-color);
    position: absolute;
}

.md-def-name:before {
    content: "";
    color: var(--text-color);
    position: absolute;
}

.md-content.md-url, .md-def-content.md-def-url.md-auto-disp {
    text-decoration: none;
    border-bottom: .1rem solid var(--text-color);
}

.CodeMirror-scroll::-webkit-scrollbar {
    display: none;
}

.file-list-item-summary {
    font-size: 1em;
}

.pin-outline #outline-content .outline-active strong, .pin-outline .outline-active {
    font-weight: 500;
    color: var(--outline-active-color);
}

.file-list-item.active {
    border-left: 4px solid var(--drake-accent);
}

#md-searchpanel .btn:not(.close-btn):hover {
    box-shadow: none;
    background: var(--btn-hover-bg-color);
}

/*checkbox*/
#write input[type=checkbox] {
    opacity: 0;
    height: 1.6rem;
    width: 1.6rem;
    margin-left: -2em;
    margin-top: 0;
    top: 0;
}

#write .ul-list li.md-task-list-item.task-list-done::before {
    content: "";
    background: var(--checkbox-checked) 0 0 no-repeat;
    background-size: 100%;
    display: inline-block;
    position: absolute;
    height: 1.6rem;
    width: 1.6rem;
    margin-left: -2em;
}
#write .ul-list li.md-task-list-item.task-list-not-done::before {
    content: "";
    background: var(--checkbox-unchecked) 0 0 no-repeat;
    background-size: 100%;
    display: inline-block;
    position: absolute;
    height: 1.6rem;
    width: 1.6rem;
    margin-left: -2em;
}
.task-list-item p {
    line-height: 1.6rem;
}

/*insert table*/
.btn {
    border-radius: 2px;
}

.modal-content {
    border-radius: 8px;
}

.btn-primary:hover, .btn-primary:active {
    background-color: var(--btn-hover-bg-color);
    color: var(--drake-highlight);
}

.btn-primary {
    background-color: transparent;
    color: var(--drake-highlight);
}

.btn-default {
    background-color: transparent;
}

.btn:active {
    box-shadow: none;
    border-color: transparent;
}

.modal-footer {
    border-top: none;
}

#table-insert-col, #table-insert-row {
    background: var(--input-bg-color);
    border-radius: 2px;
}

/*preference panel*/
#megamenu-content {
    background-image: none !important;
    background-color: var(--bg-color);
}
#top-titlebar {
    height: inherit;
    background-color: var(--bg-color);
}
#megamenu-menu-sidebar {
    background-color: var(--bg-color);
    color: var(--text-color);
}
.long-btn {
    width: inherit;
    min-width: 300px;
    border: 1px solid var(--text-color);
    border-radius: 6px;
}
.megamenu-menu-panel h1 {
    margin-bottom: 3rem;
    text-align: left;
}
.megamenu-menu-panel h1, .megamenu-menu-panel h2 {
    font-weight: normal;
}
#recent-file-panel-search-input {
    height: 45px;
    border: none;
    border-bottom: 1px solid var(--text-color);
    padding-left: 8px;
}
#recent-file-panel-search-input::placeholder {
    color: var(--text-color);
    opacity: .5;
}
.megamenu-menu-header {
    border-bottom: none;
}
#recent-file-panel-action-btn {
    background: none;
    border: none;
}
#recent-file-panel-action-btn-container {
    float: none;
    display: inline-block;
}
#top-titlebar .toolbar-icon.btn.hover, #top-titlebar .toolbar-icon.btn:hover {
    background-color: var(--btn-hover-bg-color);
    color: var(--text-color);
}
.megamenu-menu-panel .btn:hover {
    background-color: var(--btn-hover-bg-color) !important;
    color: var(--text-color);
}
#recent-file-panel tbody tr:nth-child(2n-1),
.megamenu-menu-panel table thead,
.megamenu-menu-panel table tr {
    background-color: transparent;
}
.megamenu-menu-panel table {
    font-weight: normal;
}
#megamenu-back-btn {
    color: var(--text-color);
    border: 1px solid var(--text-color);
}
.megamenu-menu-header #megamenu-menu-header-title {
    color: var(--text-color);
}
header, .context-menu, .megamenu-content, footer {
    font-family: var(--text-font);
}
.ty-preferences select {
    padding-left: 2px;
}
.preference-item-hint {
    font-size: 14px;
}
a.ty-link {
    color: var(--a-color);
    margin: 0 .2rem;
}

/**
    code render
    Name: IntelliJ IDEA light theme
    From IntelliJ IDEA by JetBrains
 */
.cm-s-inner.CodeMirror {
    background: none;
    color: var(--code-block-color);
}
.cm-s-inner span.cm-number {
    color: #c5221f;
}
.cm-s-inner span.cm-atom {
    color: #c5221f;
}
.cm-s-inner span.cm-def {
    color: #00f;
}
.cm-s-inner span.cm-variable {
    color: var(--code-block-color);
}
.cm-s-inner span.cm-variable-2 {
    color: #00627A;
}
.cm-s-inner span.cm-variable-3, .cm-s-inner span.cm-type {
    color: #9334e6;
}
.cm-s-inner span.cm-property {
    color: var(--code-block-color);
}
.cm-s-inner span.cm-keyword {
    color: #1967d2;
}
.cm-s-inner span.cm-operator {
    color: var(--code-block-color);
}
.cm-s-inner span.cm-comment {
    color: #b80672;
}
.cm-s-inner span.cm-string {
    color: #008000;
}
.cm-s-inner span.cm-string-2 {
    color: #008000;
}
.cm-s-inner span.cm-qualifier {
    color: var(--code-block-color);
}
.cm-s-inner span.cm-error {
    color: red;
}
.cm-s-inner span.cm-attribute {
    color: #9334e6;
}
.cm-s-inner span.cm-tag.cm-bracket {
    color: #1967d2;
}
.cm-s-inner span.cm-link {
    color: #4A86E8;
}
.cm-s-inner span.cm-builtin {
    color: var(--code-block-color);
}
.cm-s-inner .cm-meta {
    color: #c5221f;
}
.cm-s-inner .CodeMirror-gutters {
    border-right: 1px solid rgba(120, 120, 120, 0.3);
    background: var(--code-block-bg-color);
}
.cm-s-inner .CodeMirror-linenumber {
    color: #787878;
}


mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG2"] path[data-c], mjx-container[jax="SVG2"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						} @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}
</style><title>InnoDB数据页的结构</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='innodb-数据页的结构'><span>InnoDB 数据页的结构</span></h1><p><strong><a href='./InnoDB记录的存储结构.html'><span>InnoDB 记录的存储结构</span></a></strong><span> 中说到页是 InnoDB 中磁盘和内存交换的基本单位，大小为 16KB</span></p><p><span>InnoDB 为了不同目的设计了多种不同类型的页，如：存放表空间头部信息的页、存放 Change Buffer 信息的页、存放 INODE 信息的页、存放 undo 日志信息的页</span></p><p><span>不要慌，本片文章主要介绍存放用户记录的</span><code>FIL_PAGE_INDEX</code><span>页，称为索引页，但是为了更贴合实际含义，本片文章将索引页换个称呼：数据页 (只要明白索引页和数据页是一个东西即可，仅限本文)</span></p><h3 id='数据页结构'><font color=#1FA774><span>数据页结构</span></font></h3><p><span>本部分先给出数据页的整体格式，也就是数据页中每个部分都是什么，至于每一部分具体有什么作用，后文慢慢介绍！！</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230426/1557161682495836JaoS9x3.svg" referrerpolicy="no-referrer" alt="3"></p><p><span>上图中各部分含义如下表：</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>名称</span></th><th style='text-align:center;' ><span>中文名</span></th><th style='text-align:center;' ><span>占用空间大小</span></th><th style='text-align:center;' ><span>简单描述</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>File Header</span></td><td style='text-align:center;' ><span>文件头部</span></td><td style='text-align:center;' ><span>38 字节</span></td><td style='text-align:center;' ><span>页的一些通用信息，所有不同类型页共有的信息</span></td></tr><tr><td style='text-align:center;' ><span>Page Header</span></td><td style='text-align:center;' ><span>页面头部</span></td><td style='text-align:center;' ><span>56 字节</span></td><td style='text-align:center;' ><span>数据页专用的一些信息</span></td></tr><tr><td style='text-align:center;' ><span>Infimum + Supremum</span></td><td style='text-align:center;' ><span>页面中的最小记录 + 最大记录</span></td><td style='text-align:center;' ><span>26 字节</span></td><td style='text-align:center;' ><span>两个虚拟记录</span></td></tr><tr><td style='text-align:center;' ><span>User Records</span></td><td style='text-align:center;' ><span>用户记录</span></td><td style='text-align:center;' ><span>不确定</span></td><td style='text-align:center;' ><span>用户存储的记录内容</span></td></tr><tr><td style='text-align:center;' ><span>Free Space</span></td><td style='text-align:center;' ><span>空闲空间</span></td><td style='text-align:center;' ><span>不确定</span></td><td style='text-align:center;' ><span>页中尚未使用的空间</span></td></tr><tr><td style='text-align:center;' ><span>Page Directory</span></td><td style='text-align:center;' ><span>页目录</span></td><td style='text-align:center;' ><span>不确定</span></td><td style='text-align:center;' ><span>页中每个分组中最大记录的相对位置</span></td></tr><tr><td style='text-align:center;' ><span>File Trailer</span></td><td style='text-align:center;' ><span>文件尾部</span></td><td style='text-align:center;' ><span>8 字节</span></td><td style='text-align:center;' ><span>校验页是否完成</span></td></tr></tbody></table></figure><p><span>由于每次添加用户记录都是从空闲空间中分配一部分内存空间，所以这两部分的大小无法确定，此消彼长的关系，类似于 </span><strong><a href='../java/对象的创建.html#分配内存'><span>Java 中通过指针碰撞为对象分配内存</span></a></strong></p><p><span>由于页目录中槽的数量需要根据记录中的分组情况而定，记录数据不确定，所以页目录的大小页不确定！！</span></p><h3 id='infimum--supremum-记录'><font color=#1FA774><span>Infimum + Supremum 记录</span></font></h3><p><span>数据页中的七个部分并不打算按顺序介绍，先挑核心内容说。既然数据页是专门用来存放记录的页，那么就先从 Infimum + Supremum 两个记录开始～</span></p><p><span>从数据页的结构上可以看到在 User Records 上面有两个特殊的记录 Infimum + Supremum，分别表示该数据页中最小记录和最大记录。这两个记录并非人为创建，而是 InnoDB 默认自动创建滴</span></p><p><span>它们俩的格式和普通的用户记录有一些差别，比用户记录更简单，只由两部分组成：5 字节大小记录头信息 (这一部分和用户记录相同)、8 字节大小存储一个固定单词，具体如下图所示：</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230426/1924081682508248IinOLD7.svg" referrerpolicy="no-referrer" alt="7"></p><p><span>后面 8 字节分别表示单词 infimum 和 supremum，Infimum 记录中的第 8 个字节没有用到，只用了前七个字节</span></p><p><span>用户记录在数据页中通过链表按照主键的大小递增排列，这也是为什么在没有定义主键时，需要用隐藏列 row_id 作为主键，</span><strong><span>详情可见 </span><a href='./InnoDB记录的存储结构.html#真实信息'><span>主键生成策略</span></a></strong><span>，而 Infimum + Supremum 正好表示最小和最大的记录</span></p><h3 id='记录在页中的存储'><font color=#1FA774><span>记录在页中的存储</span></font></h3><p><span>在一开始生成数据页的时候，其实是没有用户记录部分的，因为用户记录数量为 0，每次插入新的用户记录时，都会从 Free Space 中申请一个和插入记录大小相等的内存空间，然后将记录插入即可</span></p><p><span>当 Free Space 空间用完后，该数据页就无法再添加新的记录，需要申请新的页。下面给出插入 n 条用户记录的过程：(为了简化，数据页的其它部分就不画了)</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230426/1639001682498340fIs2Eh4.svg" referrerpolicy="no-referrer" alt="4"></p><p><strong><font color='red'><span>注意：</span></font></strong><span>实际过程中，每个用户记录的长度是不一样的，而且也不像上图中那样规则排列，而是紧密排列，真实情况如下图所示：</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230426/1646031682498763pIhNJC5.svg" referrerpolicy="no-referrer" alt="5"></p><p><span>到此为止介绍的记录在页中的存储还处于宏观层面，至于记录与记录之间到底是如何组织还一无所知。下面就深入底层，去领略一下微观世界的美丽～</span></p><p><span>在 </span><strong><a href='./InnoDB记录的存储结构.html#innodb-行格式'><span>InnoDB 行格式</span></a></strong><span> 中介绍了记录头信息，固定为 5 字节，它在组织记录的时候起到了很大的作用。本部分侧重记录头中的值，而非每部分的位数大小，所以都用十进制表示值，实际中是十六进制表示</span></p><p><span id="pic"></span></p><p><span>记录头中各属性的详细信息如下表所示：</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>名称</span></th><th style='text-align:center;' ><span>大小 (bit)</span></th><th style='text-align:center;' ><span>描述</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>预留位 1</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>没有使用</span></td></tr><tr><td style='text-align:center;' ><span>预留位 2</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>没有使用</span></td></tr><tr><td style='text-align:center;' ><span>deleted_flag</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>标记该记录是否被删除</span></td></tr><tr><td style='text-align:center;' ><span>min_rec_flag</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>B+ 树的每层非叶子节点中最小的目录项记录都会添加该标记</span></td></tr><tr><td style='text-align:center;' ><span>n_owned</span></td><td style='text-align:center;' ><span>4</span></td><td style='text-align:center;' ><span>一个页面中的记录会被分为若干个组，每个组中都有一个记录是「带头大哥」，其余的记录都是「小弟」</span><br /><span>「带头大哥」记录的 n_owned 值代表该组中所有的记录条数</span><br /><span>「小弟」记录的 n_owned 值都为 0</span></td></tr><tr><td style='text-align:center;' ><span>heap_no</span></td><td style='text-align:center;' ><span>13</span></td><td style='text-align:center;' ><span>表示当前记录在页面堆中的相对位置</span></td></tr><tr><td style='text-align:center;' ><span>record_type</span></td><td style='text-align:center;' ><span>3</span></td><td style='text-align:center;' ><span>表示当前记录的类型，0 表示普通记录，1 表示 B+ 树非叶子节点的目录项记录</span><br /><span>2 表示 Infimum 记录，3 表示 Supremum 记录</span></td></tr><tr><td style='text-align:center;' ><span>next_record</span></td><td style='text-align:center;' ><span>16</span></td><td style='text-align:center;' ><span>表示下一条记录的偏移量</span></td></tr></tbody></table></figure><p><span>一条记录的简化图如下：</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230426/1706551682500015hN6gV96.svg" referrerpolicy="no-referrer" alt="6"></p><p><span>现在向一个只有三个字段的表中插入 4 条记录，那么该数据页中用户记录部分的详细布局如下图所示：(把 Infimum + Supremum 记录也加上)</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230426/2019361682511576V5grnf8.svg" referrerpolicy="no-referrer" alt="8"></p><p><span>下面所有的介绍都围绕上图展开！！！</span></p><h4 id='deletedflag'><font color=#9933FF><span>deleted_flag</span></font></h4><p><span>deleted_flag 是记录头信息中除了预留位之外第一个属性，它用来标记该记录是否被删除，1 表示已删除，0 表示未删除</span></p><p><span>当一个记录被删除时，其实它并没有真正的从页中删除，仅仅做了三件事情：</span></p><ul><li><p><span>将该记录的 deleted_flag 设为 1</span></p></li><li><p><span>修改 next_record 指针 (后文介绍 next_record 的作用)</span></p></li><li><p><span>被删除记录组成一个垃圾链表，被称为可重用空间</span></p></li></ul><p><span>这样做的好处在于：如果真正的从页面中删除，需要对该页重新排列，也就是将被删除记录后面的记录整体向前移动，这样无疑带来性能上的消耗；仅仅标记为删除，但不对磁盘重新排列可以大大降低删除开销，而且如果后续有新纪录插入，就可能覆盖掉删除的这些记录所占用的存储空间，即：在新记录覆盖到已删除记录的位置</span></p><h4 id='minrecflag'><font color=#9933FF><span>min_rec_flag</span></font></h4><p><span>B+ 树的每层非叶子节点中最小的目录项记录都会添加该标记，1 表示添加了该标记，0 表示未添加该标记</span></p><p><span>(后续介绍索引时详细介绍该属性，到时候会更新该文章)</span></p><h4 id='nowned'><font color=#9933FF><span>n_owned</span></font></h4><p><span>留到后面介绍，</span><strong><span>可见 </span><a href='./InnoDB数据页的结构.html#page-directory'><span>Page Directory</span></a></strong></p><h4 id='heapno'><font color=#9933FF><span>heap_no</span></font></h4><p><strong><a href='./InnoDB数据页的结构.html#记录在页中的存储'><span>记录在页中的存储</span></a></strong><span> 中介绍过，记录在数据页中是紧密排列的，InnoDB 将紧密排列的记录称之为堆 (heap)，heap_no 就是记录在堆中的编号，从 0 开始</span></p><p><span>但是编号 0 和 1 已经被 Infimum 和 Supremum 记录使用，所以用户记录是从编号 2 开始，物理位置越靠后记录的编号越大，当前记录的 heap_no 是前一个记录的 heap_no + 1</span></p><p><span>而且一个记录被分配了 heap_no 后就不会再改变，即使该记录被删了，也仅仅只是将 deleted_flag 置为 1，heap_no 依旧保持不变</span></p><p><span>文章 </span><strong><a href='./InnoDB数据页的结构.html#infimum--supremum-记录'><span>Infimum + Supremum 记录</span></a></strong><span> 部分最后提到：用户记录在数据页中通过链表按照主键的大小递增排列，下面好好解释一下这句话！</span></p><p><span>当插入一个用户记录时，在物理磁盘中，其实是直接从 Free Space 中划分了一部分空间，然后加入到了 User Records 中的最后面，那么思考：即然物理上无序，怎么保证数据页中记录按主键递增呢？</span></p><p><span>关键点就在于 next_record 属性，它存储了下一条记录的偏移量，可以看作是一个指针，通过 next_record 属性，可以保证用户记录在物理上无序，但在逻辑上有序</span></p><p><span>假设依次插入了三条记录，主键分别是 5、6、1，这三条记录以及 Infimum 和 Supremum 记录在磁盘中的物理位置关系就是紧密的从上到下排列，然后通过 next_record 保证记录在逻辑上有序</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230426/2318211682522301sE4sHg9.svg" referrerpolicy="no-referrer" alt="9"></p><h4 id='recordtype'><font color=#9933FF><span>record_type</span></font></h4><p><span>record_type 属性表示当前记录的类型，0 表示普通记录，1 表示 B+ 树非叶子节点的目录项记录，2 表示 Infimum 记录，3 表示 Supremum 记录</span></p><h4 id='nextrecord'><font color=#9933FF><span>next_record</span></font></h4><p><span>next_record 记录着下一条记录的偏移量，类似于链表中的指针，也是它保证着记录的有序性，在 </span><strong><a href='./InnoDB数据页的结构.html#heapno'><span>heap_no</span></a></strong><span> 部分介绍了如何保持有序</span></p><p><span>从 Infimum 沿着 next_record 向后遍历的顺序就是主键递增的顺序，在数据库查询的时候常常都是根据主键查询某个记录，所以可以借助有序性的特点使用二分搜索，提高查询的速度</span></p><p><span>但由于 next_record 只记录了下一个记录的偏移量，所以不好实现二分搜索，就类似于有序链表中也不方便使用二分查找，这里就需要引出下一个 Page Directory 部分</span></p><h4 id='page-directory'><font color=#9933FF><span>Page Directory</span></font></h4><p><span>虽然 Page Directory 不属于记录头的内容，但它和记录头息息相关，也和高效查询有很大的关系，所以就放一起介绍咯</span></p><p><span>数据页的记录之间有一个分组的概念，所有用户记录，包括 Infimum 和 Supremum 记录会被分为若干组，每一组中最大的记录是该组的「带头大哥」，负责存储组中记录的数量 (被删除的记录不会参与分组)</span></p><p><span>这个时候就可以很简单的解释清楚 n_owned 属性的含义，如果是一个分组中最大的记录，那么 n_owned 表示该分组内记录的数量；如果不是一个分组中最大的记录，那么 n_owned 为 0</span></p><p><strong><font color='red'><span>注意：</span></font></strong><span>Infimum 和 Supremum 记录不会被分到一组，也就是如果数据页中只有这两个记录，那么会被分为两组</span></p><p><span>将每一组「带头大哥」相对数据页起始位置的偏移量按序存入到 Page Directory 中，越靠前的组存入到 Page Directory 越靠右的位置，如 </span><strong><a href='InnoDB数据页的结构.html#pic'><span>记录分布图</span></a></strong><span> 所示，为了更清晰，将图重构一波～</span></p><p><span>下图为了清晰，将 Supremum 记录的位置调整了一波，但和实际物理上的布局有差别</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230427/0153031682531583x0dag110.svg" referrerpolicy="no-referrer" alt="10"></p><p><span>槽 0 的偏移量为 99，因为 Infimum 记录前面有 File Header (38 字节) 和 Page Header (56 字节)，而且 Infimum 记录头信息占 5 字节，所以 38 + 56 + 5 = 99</span></p><p><span>槽 1 的偏移量为 112，上面已经算过槽 0 的偏移量，只需要在此基础上加 (8 + 5) 字节即可，正好 99 + 8 + 5 = 112</span></p><p><span>由于数据页的大小为 16KB，所以偏移量最多只有 16384 字节，2 字节 (</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.592ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 5123.7 915.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-1-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1567.9,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(2623.7,0)"><use data-c="36" xlink:href="#MJX-1-TEX-N-36"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(500,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(1500,0)"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(2000,0)"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>16</mn></mrow></msup><mo>=</mo><mn>65536</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{16} = 65536</script><span>) 完全可以表示该数量，所以 Page Directory 每个槽 2 字节就够了</span></p><p><span>InnoDB 对每个分组中记录的数量有如下规定：</span></p><ul><li><p><span>Infimum 记录所在的分组只能有 1 个记录</span></p></li><li><p><span>Supremum 记录所在的分组只能有 1 ～ 8 个记录</span></p></li><li><p><span>其它分组只能有 4 ～ 8 个记录</span></p></li></ul><p><span>从规定可以推断出其它分组只能从 Supremum 记录所在的分组中分裂而来，当 Supremum 记录所在的分组数量到达 9 个时，就会拆分成两个分组 (4 和 5)，同时 Page Directory 会新增一个槽</span></p><p><span>基于这种设计可以使用二分搜索查询记录，首先对 Page Directory 中的槽进行二分搜索，找到一个大于待查询记录且主键差值最小的槽。如果待查询记录存在，那么一定在该槽对应的分组中，由于分组中记录数量少直接遍历即可</span></p><p><span>Infimum 是最小的记录，所以二分搜索时不可能搜到 Infimum 记录对应的槽，从而新插入记录也不可能接到 Infimum 记录后面，从这个角度也证明了 Infimum 记录所在的分组只会有 1 个记录</span></p><h3 id='page-header-页面头部'><font color=#1FA774><span>Page Header (页面头部)</span></font></h3><p><span>Page Header 存储了一些专属于这个类型页面的信息，也就是数据页的信息，由于属性有点多，这里就先罗列出来，方便后续查找</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>状态名称</span></th><th style='text-align:center;' ><span>占用空间大小</span></th><th style='text-align:center;' ><span>描述</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>PAGE_N_DIR_SLOTS</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>在页目录中的槽数量</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_HEAP_TOP</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>还未使用的空间最小地址，也就是从该地址后就是 Free Space</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_N_HEAP</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>第 1 位表示本记录是否为紧凑型，剩余 15 位表示本页的堆中记录的数量 (包括 Supremum、Supremum、标记为已删除的记录)</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_FREE</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>各个删除的记录通过 next_record 组成一个单向链表，这个单向链表中的记录所占用的存储空间可以被重新利用</span><br /><span>PAGE_FREE 表示该链表头节点对应记录在页面中的偏移量</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_GARBAGE</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>已删除记录占用的字节数</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_LAST_INSERT</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>最后插入记录的位置</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_DIRECTION</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>记录插入的方向，新插入记录比最后一条记录的大小关系，大于表示右边，小于表示左边</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_N_DIRECTION</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>一个方向连续插入的记录数量</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_N_RECS</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>该页中用户记录的数量 (不包括 Supremum、Supremum、标记为已删除的记录)</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_MAX_TRX_ID</span></td><td style='text-align:center;' ><span>8 字节</span></td><td style='text-align:center;' ><span>修改当前页的最大事务 id，该值仅在二级索引页面中定义</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_LEVEL</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>当前页在 B+ 树中所处的层级</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_INDEX_ID</span></td><td style='text-align:center;' ><span>8 字节</span></td><td style='text-align:center;' ><span>索引 ID，表示当前页属于哪个索引</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_BTR_SEG_LEAF</span></td><td style='text-align:center;' ><span>10 字节</span></td><td style='text-align:center;' ><span>B+ 树叶子节点段的头部信息，仅在 B+ 树的根页面中定义</span></td></tr><tr><td style='text-align:center;' ><span>PAGE_BTR_SEG_TOP</span></td><td style='text-align:center;' ><span>10 字节</span></td><td style='text-align:center;' ><span>B+ 树非叶子节点段的头部信息，仅在 B+ 树的根页面中定义</span></td></tr></tbody></table></figure><h3 id='file header-文件头部'><font color=#1FA774><span>File Header (文件头部)</span></font></h3><p><span>File Header 存储了各种不同类型页的通用信息，不限于某种具体类型的页，所有的页都有这些属性，由于属性有点多，这里就先罗列出来，方便后续查找</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>状态名称</span></th><th style='text-align:center;' ><span>占用空间大小</span></th><th style='text-align:center;' ><span>描述</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>FIL_PAGE_SPACE_OR_CHKSUM</span></td><td style='text-align:center;' ><span>4 字节</span></td><td style='text-align:center;' ><span>当 MySQL 版本低于 4.0.14 时，该属性表示本页面所在的表空间 ID</span><br /><span>在之后的版本中，该属性表示页的校验和 (checksum)</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_OFFSET</span></td><td style='text-align:center;' ><span>4 字节</span></td><td style='text-align:center;' ><span>页号</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_PREV</span></td><td style='text-align:center;' ><span>4 字节</span></td><td style='text-align:center;' ><span>上一个页的页号</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_NEXT</span></td><td style='text-align:center;' ><span>4 字节</span></td><td style='text-align:center;' ><span>下一个页的页号</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_LSN</span></td><td style='text-align:center;' ><span>8 字节</span></td><td style='text-align:center;' ><span>页面被最后修改时对应的 LSN (Log Sequence Number，日志序列号) 值</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_TYPE</span></td><td style='text-align:center;' ><span>2 字节</span></td><td style='text-align:center;' ><span>该页的类型</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_FILE_FLUSH_LSN</span></td><td style='text-align:center;' ><span>8 字节</span></td><td style='text-align:center;' ><span>仅在系统表空间的第一个页中定义，代表文件至少被刷新到了对应的 LSN 值</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_ARCH_LOG_NO_OR_SPACE_ID</span></td><td style='text-align:center;' ><span>4 字节</span></td><td style='text-align:center;' ><span>页属于哪个表空间</span></td></tr></tbody></table></figure><p><span>上面的属性有 FIL_PAGE_PREV (上一个页的页号) 和 FIL_PAGE_NEXT (下一个页的页号)，类似于两个指针，将所有页连起来形成双向链表，如下图所示：</span></p><p><img src="https://cdn.jsdelivr.net/gh/LFool/new-image-hosting@master/20230427/0248471682534927DHZF6A11.svg" referrerpolicy="no-referrer" alt="11"></p><p><span>最后再介绍一下有哪些不同类的页面</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>类型名称</span></th><th style='text-align:center;' ><span>十六进制</span></th><th style='text-align:center;' ><span>描述</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>FIL_PAGE_TYPE_ALLOCATED</span></td><td style='text-align:center;' ><span>0x0000</span></td><td style='text-align:center;' ><span>最新分配，还未使用</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_UNDO_LOG</span></td><td style='text-align:center;' ><span>0x0002</span></td><td style='text-align:center;' ><span>undo 日志页</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_INODE</span></td><td style='text-align:center;' ><span>0x0003</span></td><td style='text-align:center;' ><span>存储段信息</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_IBUF_FREE_LIST</span></td><td style='text-align:center;' ><span>0x0004</span></td><td style='text-align:center;' ><span>Change Buffer 空闲列表</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_IBUF_BITMAP</span></td><td style='text-align:center;' ><span>0x0005</span></td><td style='text-align:center;' ><span>Change Buffer 的一些属性</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_TYPE_SYS</span></td><td style='text-align:center;' ><span>0x0006</span></td><td style='text-align:center;' ><span>存储一些系统数据</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_TYPE_TRX_SYS</span></td><td style='text-align:center;' ><span>0x0007</span></td><td style='text-align:center;' ><span>事务系统数据</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_TYPE_FSP_HDR</span></td><td style='text-align:center;' ><span>0x0008</span></td><td style='text-align:center;' ><span>表空间头部信息</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_TYPE_XDES</span></td><td style='text-align:center;' ><span>0x0009</span></td><td style='text-align:center;' ><span>存储区的一个属性</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_TYPE_BLOB</span></td><td style='text-align:center;' ><span>0x000A</span></td><td style='text-align:center;' ><span>溢出页</span></td></tr><tr><td style='text-align:center;' ><span>FIL_PAGE_INDEX</span></td><td style='text-align:center;' ><span>0x45BF</span></td><td style='text-align:center;' ><span>索引页，也就是本文中的数据页</span></td></tr></tbody></table></figure><h3 id='file-trailer-文件尾部'><font color=#1FA774><span>File Trailer (文件尾部)</span></font></h3><p><span>File Trailer 主要的作用就是校验页的完整性，由于磁盘中的页必须加载到内存中才能进行操作，如果在内存中对页进行了修改，那么还需要将内存中的页刷新回磁盘</span></p><p><span>如果在刷新回磁盘的过程中 MySQL 服务器挂了，那么将出现只有一部分数据刷盘成功，导致磁盘中页的数据不完整，为了避免这种情况，在每个文件尾部都加了一个 File Trailer 部分 (8 字节)</span></p><ul><li><p><span>前 4 个字节表示页的校验和，这部分和 File Header 中的第一个属性 FIL_PAGE_SPACE_OR_CHKSUM 相对应。如果刷新成功，那么页首和页尾的校验和应该是一致的</span></p></li><li><p><span>后 4 个字节表示页面最后被修改时对应的 LSN 的后 4 个字节，正常情况下应该和 File Header 中的 FIL_PAGE_LSN 属性的后 4 个字节相同</span></p></li></ul></div></div>
</body>
</html>